<!DOCTYPE html>
<html lang="ru">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BKRLVLW1G0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BKRLVLW1G0');
</script>

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
  _paq.push(["setCookieDomain", "*.raku.guide"]);
  _paq.push(["setDomains", ["*.raku.guide"]]);
  _paq.push(["setDoNotTrack", true]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://hankache.com/matomo/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="description" content="Общее введение в Raku">
<meta name="keywords" content="perl6, perl 6, introduction, perl6intro, perl 6 introduction, perl 6 tutorial, perl 6 intro, raku, raku introduction, raku guide, raku tutorial">
<meta name="author" content="Naoum Hankache, Alexander Kiryuhin">
<title>Введение в Raku</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #3D7B7B; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #F00 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666 } /* Operator */
pre.pygments .tok-ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #9C6500 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
pre.pygments .tok-gr { color: #E40000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #008400 } /* Generic.Inserted */
pre.pygments .tok-go { color: #717171 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #04D } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #687822 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #00F; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #800 } /* Name.Constant */
pre.pygments .tok-nd { color: #A2F } /* Name.Decorator */
pre.pygments .tok-ni { color: #717171; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #00F } /* Name.Function */
pre.pygments .tok-nl { color: #767600 } /* Name.Label */
pre.pygments .tok-nn { color: #00F; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #A2F; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #BBB } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #A45A77 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #00F } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Введение в Raku</h1>
<div class="details">
<span id="author" class="author">Naoum Hankache</span><br>
<span id="email" class="email"><a href="mailto:naoum@hankache.com">naoum@hankache.com</a></span><br>
<span id="author2" class="author">Alexander Kiryuhin</span><br>
<span id="email2" class="email"><a href="mailto:alexander.kiryuhin@gmail.com">alexander.kiryuhin@gmail.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Оглавление</div>
<ul class="sectlevel1">
<li><a href="#_введение">1. Введение</a>
<ul class="sectlevel2">
<li><a href="#_что_такое_raku">1.1. Что такое Raku</a></li>
<li><a href="#_жаргон">1.2. Жаргон</a></li>
<li><a href="#_установка_raku">1.3. Установка Raku</a></li>
<li><a href="#_запуск_кода_на_raku">1.4. Запуск кода на Raku</a></li>
<li><a href="#_текстовые_редакторы">1.5. Текстовые редакторы</a></li>
<li><a href="#_привет_мир">1.6. Привет, Мир!</a></li>
<li><a href="#_обзор_синтаксиса">1.7. Обзор синтаксиса</a></li>
</ul>
</li>
<li><a href="#_операторы">2. Операторы</a>
<ul class="sectlevel2">
<li><a href="#_общие_операторы">2.1. Общие операторы</a></li>
<li><a href="#_обратные_операторы">2.2. Обратные операторы</a></li>
<li><a href="#_операторы_свёртки">2.3. Операторы свёртки</a></li>
</ul>
</li>
<li><a href="#_переменные">3. Переменные</a>
<ul class="sectlevel2">
<li><a href="#_скаляры">3.1. Скаляры</a></li>
<li><a href="#_массивы">3.2. Массивы</a></li>
<li><a href="#_хеши">3.3. Хеши</a></li>
<li><a href="#_типы">3.4. Типы</a></li>
<li><a href="#_интроспекция">3.5. Интроспекция</a></li>
<li><a href="#_область_видимости">3.6. Область видимости</a></li>
<li><a href="#_присваивание_vs_привязывание">3.7. Присваивание vs. Привязывание</a></li>
</ul>
</li>
<li><a href="#_функции_и_мутаторы">4. Функции и мутаторы</a></li>
<li><a href="#_циклы_и_условия">5. Циклы и условия</a>
<ul class="sectlevel2">
<li><a href="#_if">5.1. if</a></li>
<li><a href="#_unless">5.2. unless</a></li>
<li><a href="#_with">5.3. with</a></li>
<li><a href="#_for">5.4. for</a></li>
<li><a href="#_given">5.5. given</a></li>
<li><a href="#_loop">5.6. loop</a></li>
</ul>
</li>
<li><a href="#_ввод_вывод">6. Ввод-вывод</a>
<ul class="sectlevel2">
<li><a href="#_базовый_ввод_вывод_в_коммандной_строке">6.1. Базовый ввод-вывод в коммандной строке</a></li>
<li><a href="#_запуск_shell_команд">6.2. Запуск shell-команд</a></li>
<li><a href="#_файловый_ввод_вывод">6.3. Файловый ввод-вывод</a></li>
<li><a href="#_работа_с_файлами_и_директориями">6.4. Работа с файлами и директориями</a></li>
</ul>
</li>
<li><a href="#_подпрограммы">7. Подпрограммы</a>
<ul class="sectlevel2">
<li><a href="#_определение">7.1. Определение</a></li>
<li><a href="#_сигнатура">7.2. Сигнатура</a></li>
<li><a href="#_множественная_диспетчеризация">7.3. Множественная диспетчеризация</a></li>
<li><a href="#_параметры_по_умолчанию_и_опциональные_параметры">7.4. Параметры по умолчанию и опциональные параметры</a></li>
<li><a href="#_возврат_значений">7.5. Возврат значений</a></li>
</ul>
</li>
<li><a href="#_функциональное_программирование">8. Функциональное программирование</a>
<ul class="sectlevel2">
<li><a href="#_функции_это_объекты_первого_класса">8.1. Функции это объекты первого класса</a></li>
<li><a href="#_анонимные_функции">8.2. Анонимные функции</a></li>
<li><a href="#_сцепление">8.3. "Сцепление"</a></li>
<li><a href="#_оператор_ленты">8.4. Оператор ленты</a></li>
<li><a href="#_гипер_оператор">8.5. Гипер оператор</a></li>
<li><a href="#_скрещение">8.6. Скрещение</a></li>
<li><a href="#_ленивые_списки">8.7. Ленивые Списки</a></li>
<li><a href="#_замыкания">8.8. Замыкания</a></li>
</ul>
</li>
<li><a href="#_классы_и_объекты">9. Классы и Объекты</a>
<ul class="sectlevel2">
<li><a href="#_введение_2">9.1. Введение</a></li>
<li><a href="#_инкапсуляция">9.2. Инкапсуляция</a></li>
<li><a href="#_именованные_и_позиционные_параметры">9.3. Именованные и Позиционные параметры</a></li>
<li><a href="#_методы">9.4. Методы</a></li>
<li><a href="#_атрибуты_класса">9.5. Атрибуты класса</a></li>
<li><a href="#_типы_доступа">9.6. Типы доступа</a></li>
<li><a href="#_наследование">9.7. Наследование</a></li>
<li><a href="#_множественное_наследование">9.8. Множественное наследование</a></li>
<li><a href="#_роли">9.9. Роли</a></li>
<li><a href="#_интроспекция_2">9.10. Интроспекция</a></li>
</ul>
</li>
<li><a href="#_обработка_исключений">10. Обработка исключений</a>
<ul class="sectlevel2">
<li><a href="#_ловля_исключений">10.1. Ловля исключений</a></li>
<li><a href="#_выброс_исключений">10.2. Выброс исключений</a></li>
</ul>
</li>
<li><a href="#_регулярные_выражения">11. Регулярные выражения</a>
<ul class="sectlevel2">
<li><a href="#_определение_регулярного_выражения">11.1. Определение регулярного выражения</a></li>
<li><a href="#_символы_сравнения_с_образцом">11.2. Символы сравнения с образцом</a></li>
<li><a href="#_сравнение_с_категорией_символов">11.3. Сравнение с категорией символов</a></li>
<li><a href="#_свойства_юникода">11.4. Свойства Юникода</a></li>
<li><a href="#_символ_подстановки">11.5. Символ подстановки</a></li>
<li><a href="#_кванторы">11.6. Кванторы</a></li>
<li><a href="#_результат_сравнения">11.7. Результат сравнения</a></li>
<li><a href="#_пример">11.8. Пример</a></li>
</ul>
</li>
<li><a href="#_модули_raku">12. Модули Raku</a>
<ul class="sectlevel2">
<li><a href="#_использование_модулей">12.1. Использование модулей</a></li>
</ul>
</li>
<li><a href="#_юникод">13. Юникод</a>
<ul class="sectlevel2">
<li><a href="#_использование_юникода">13.1. Использование Юникода</a></li>
<li><a href="#_операции_которые_учитывают_юникод">13.2. Операции, которые учитывают Юникод</a></li>
</ul>
</li>
<li><a href="#_параллелизм_одновременность_и_асинхронность">14. Параллелизм, одновременность и асинхронность</a>
<ul class="sectlevel2">
<li><a href="#_параллелизм">14.1. Параллелизм</a></li>
<li><a href="#_одновременность_и_асинхронность">14.2. Одновременность и Асинхронность</a></li>
</ul>
</li>
<li><a href="#_интерфейс_для_нативных_вызовов">15. Интерфейс для нативных вызовов</a>
<ul class="sectlevel2">
<li><a href="#_вызов_функции">15.1. Вызов функции</a></li>
<li><a href="#_переименование_функции">15.2. Переименование функции</a></li>
<li><a href="#_передача_аргументов">15.3. Передача аргументов</a></li>
<li><a href="#_возврат_значений_2">15.4. Возврат значений</a></li>
<li><a href="#_типы_2">15.5. Типы</a></li>
</ul>
</li>
<li><a href="#_сообщество">16. Сообщество</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Цель этого документа - дать вам краткий обзор языка программирования Raku.
Тем, кто только знакомится с Raku, он должен помочь начать им пользоваться.</p>
</div>
<div class="paragraph">
<p>Некоторые разделы документа ссылаются на другие (более полные и подробные) части <a href="https://docs.raku.org/">официальной документации Raku</a>.
Ознакомьтесь с ними, если вам нужно больше информации по определённой теме.</p>
</div>
<div class="paragraph">
<p>В этом документе вы найдёте примеры кода для решения часто встречающихся задач.
Для того, чтобы лучше его понять, выделите время для набора и запуска всех представленных примеров.</p>
</div>
<div class="paragraph">
<div class="title">Лицензия</div>
<p>Данный документ лицензирован в терминах Creative Commons Attribution-ShareAlike 4.0 International License.
Для просмотра копии лицензии, посетите</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="bare">https://creativecommons.org/licenses/by-sa/4.0/</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Содействие</div>
<p>Если вы хотите внести вклад в этот документ, перейдите по ссылке:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/hankache/rakuguide" class="bare">https://github.com/hankache/rakuguide</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Обратная связь</div>
<p>Любые отзывы очень приветствуются:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="mailto:naoum@hankache.com">naoum@hankache.com</a></p>
</li>
<li>
<p><a href="mailto:alexander.kiryuhin@gmail.com">alexander.kiryuhin@gmail.com</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если вам понравилось это введение, поставьте "звезду" репозиторию на
<a href="https://github.com/hankache/rakuguide">Github</a>.</p>
</div>
<div class="ulist">
<div class="title">Переводы</div>
<ul>
<li>
<p>Болгарский: <a href="https://raku.guide/bg" class="bare">https://raku.guide/bg</a></p>
</li>
<li>
<p>Китайский: <a href="https://raku.guide/zh" class="bare">https://raku.guide/zh</a></p>
</li>
<li>
<p>Нидерландский: <a href="https://raku.guide/nl" class="bare">https://raku.guide/nl</a></p>
</li>
<li>
<p>Французский: <a href="https://raku.guide/fr" class="bare">https://raku.guide/fr</a></p>
</li>
<li>
<p>Немецкий: <a href="https://raku.guide/de" class="bare">https://raku.guide/de</a></p>
</li>
<li>
<p>Индонезийский: <a href="https://raku.guide/id" class="bare">https://raku.guide/id</a></p>
</li>
<li>
<p>Итальянский: <a href="https://raku.guide/it" class="bare">https://raku.guide/it</a></p>
</li>
<li>
<p>Японский: <a href="https://raku.guide/ja" class="bare">https://raku.guide/ja</a></p>
</li>
<li>
<p>Португальский: <a href="https://raku.guide/pt" class="bare">https://raku.guide/pt</a></p>
</li>
<li>
<p>Испанский: <a href="https://raku.guide/es" class="bare">https://raku.guide/es</a></p>
</li>
<li>
<p>Турецкий: <a href="https://raku.guide/tr" class="bare">https://raku.guide/tr</a></p>
</li>
<li>
<p>Русский: <a href="https://raku.guide/ru" class="bare">https://raku.guide/ru</a></p>
</li>
<li>
<p>Украинский: <a href="https://raku.guide/uk" class="bare">https://raku.guide/uk</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_введение">1. Введение</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_что_такое_raku">1.1. Что такое Raku</h3>
<div class="paragraph">
<p>Raku - это универсальный язык высокого уровня с постепенной типизацией.
Raku является мультипарадигменным: он поддерживает процедурное, объектно-ориентированное и функциональное программирование.</p>
</div>
<div class="ulist">
<div class="title">Девиз Raku:</div>
<ul>
<li>
<p>TMTOWTDI (читается как "Тим Тоуди"): "Есть больше одного способа сделать это".</p>
</li>
<li>
<p>Простые вещи должны оставаться простыми, сложные - упрощаться, а невозможное должно быть сложным.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_жаргон">1.2. Жаргон</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Raku</strong>: Спецификация языка с тестовым набором (test suite).
Реализации, которые проходят все тесты спецификации, считаются Raku.</p>
</li>
<li>
<p><strong>Rakudo</strong>: Компилятор Raku.</p>
</li>
<li>
<p><strong>Rakudobrew</strong>: Менеджер установки Rakudo.</p>
</li>
<li>
<p><strong>Zef</strong>: менеджер модулей Raku.</p>
</li>
<li>
<p><strong>Rakudo Star</strong>: Сборка, включающий в себя Rakudo, Zef, набор Raku модулей и документацию.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_установка_raku">1.3. Установка Raku</h3>
<div class="paragraph">
<div class="title">Linux</div>
<p>Чтобы установить Rakudo Star, запустите следующие команды в вашем эмуляторе терминала:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">mkdir</span> ~/<span class="tok-n">rakudo</span> &amp;&amp; <span class="tok-n">cd</span> <span class="tok-nv">$_</span>
<span class="tok-n">curl</span> -<span class="tok-n">LJO</span> <span class="tok-n">https:</span>//<span class="tok-n">rakudo</span>.<span class="tok-n">org</span><span class="tok-o">/</span><span class="tok-n">latest</span><span class="tok-o">/</span><span class="tok-n">star</span><span class="tok-o">/</span><span class="tok-n">src</span>
<span class="tok-n">tar</span> -<span class="tok-n">xzf</span> <span class="tok-n">rakudo-star-</span>*.<span class="tok-n">tar</span>.<span class="tok-n">gz</span>
<span class="tok-n">mv</span> <span class="tok-n">rakudo-star-</span>*/* .
<span class="tok-n">rm</span> -<span class="tok-n">fr</span> <span class="tok-n">rakudo-star-</span>*

./<span class="tok-n">bin</span><span class="tok-o">/</span><span class="tok-n">rstar</span> <span class="tok-n">install</span>

<span class="tok-n">echo</span> <span class="tok-s">&quot;export PATH=$(pwd)/bin/:$(pwd)/share/perl6/site/bin:$(pwd)/share/perl6/vendor/bin:$(pwd)/share/perl6/core/bin:\$PATH&quot;</span> &gt;&gt; ~/.<span class="tok-n">bashrc</span>
<span class="tok-nb">source</span> ~/.<span class="tok-n">bashrc</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>С другими вариантами можно ознакомиться на <a href="https://rakudo.org/star/source" class="bare">https://rakudo.org/star/source</a></p>
</div>
<div class="paragraph">
<div class="title">macOS</div>
<p>Есть четыре варианта:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Следуйте тем же шагам, что указаны для установки на Linux.</p>
</li>
<li>
<p>Установить с помощью homebrew: <code>brew install rakudo-star</code></p>
</li>
<li>
<p>Установить с помощью MacPorts: <code>sudo port install rakudo</code></p>
</li>
<li>
<p>Загрузите последний установщик (файл с расширением .dmg) с <a href="https://rakudo.org/latest/star/macos" class="bare">https://rakudo.org/latest/star/macos</a></p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Windows</div>
<ol class="arabic">
<li>
<p>Для 64-битной архитектуры: скачайте установщик (файл с расширением .msi) с <a href="https://rakudo.org/latest/star/win" class="bare">https://rakudo.org/latest/star/win</a></p>
</li>
<li>
<p>После установки убедитесь, что <code>C:\rakudo\bin</code> добавлен в переменную PATH.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Docker</div>
<ol class="arabic">
<li>
<p>Установите официальный образ Docker <code>docker pull rakudo-star</code></p>
</li>
<li>
<p>Затем запустите контейнер с образом <code>docker run -it rakudo-star</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_запуск_кода_на_raku">1.4. Запуск кода на Raku</h3>
<div class="paragraph">
<p>Запуск кода Raku может быть осуществлён с помощью REPL ("Read-Eval-Print Loop"", цикл «чтение — вычисление — вывод»).
Для этого откройте эмулятор терминала, наберите <code>perl6</code> или <code>raku</code> в командной строке и
нажмите [Enter]. После этого должно появиться приглашение командной строки - символ <code>&gt;</code>.
Далее напечатайте строку кода и нажмите [Enter]. REPL выведет
значение строки. Затем вы можете напечатать другую строку или напечатать <code>exit</code>
и нажать [Enter], чтобы покинуть REPL.</p>
</div>
<div class="paragraph">
<p>Также вы можете написать код в файле, сохранить его и затем запустить.
Рекомендуется сохранять Raku скрипт в файл с расширением <code>.p6</code>.
Запустите файл, напечатав <code>perl6 имяфайла.p6</code> в окне эмулятора терминала
и нажав [Enter]. В отличии от использования REPL, результат каждой строки не будет автоматически выводиться: для этого код должен содержать инструкции для вывода, к примеру <code>say</code>.</p>
</div>
<div class="paragraph">
<p>REPL в основном используется для проверки определенной части кода, обычно
только одной строки. Программы с более чем одной строкой кода рекомендуется
сохранять в файлы и только затем запускать их.</p>
</div>
<div class="paragraph">
<p>Также отдельные строки кода могут быть запущены в командной строке в не-интерактивном режиме
вводом <code>perl6 -e 'ваш код'</code> и нажатием [Enter].</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Rakudo Star также содержит интерактивный редактор, который поможет вам пользоваться REPL в полной мере.</p>
</div>
<div class="paragraph">
<p>Если вы установили только Rakudo вместо Rakudo Star, у вас вероятно не будет определенных возможностей REPL (листание истории клавишами "вверх" и "вниз", "влево" и "вправо" для правки, TAB для автодополнения).
Вы можете запустить следующую команду и будете готовы к работе:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>zef install Linenoise</code> для Windows, Linux и macOS</p>
</li>
<li>
<p><code>zef install Readline</code>, если вы пользуетесь Linux и предпочитаете библиотеку <em>Readline</em></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_текстовые_редакторы">1.5. Текстовые редакторы</h3>
<div class="paragraph">
<p>Поскольку большую часть времени мы будем писать и хранить программы на Raku в файлах, нам нужен
хороший текстовый редактор, который будет распознавать синтаксис Raku.</p>
</div>
<div class="paragraph">
<p>Лично я пользуюсь и рекомендую <a href="https://atom.io/">Atom</a>. Это современный текстовый редактор, способный "из коробки" подсвечивать синтаксис Raku.
<a href="https://atom.io/packages/language-perl6">Perl 6 FE</a> - альтернативный плагин подсветки кода в Atom, "отколовшийся" от оригинального плагина, содержащий много исправлений и улучшений.</p>
</div>
<div class="paragraph">
<p>Други люди из нашего сообщества также пользуются <a href="http://www.vim.org/">Vim</a>, <a href="https://www.gnu.org/software/emacs/">GNU Emacs</a> или <a href="http://padre.perlide.org/">Padre</a>.</p>
</div>
<div class="paragraph">
<p>Последние версии Vim&#8217;a имеют подсветку синтаксиса "из коробки". Emacs и Padre потребуют установки дополнительных плагинов.</p>
</div>
</div>
<div class="sect2">
<h3 id="_привет_мир">1.6. Привет, Мир!</h3>
<div class="paragraph">
<p>Нам стоит начать с ритуала <code>hello world</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&#39;hello world&#39;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ещё это можно написать так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-s">&#39;hello world&#39;</span>.<span class="tok-nb">say</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_обзор_синтаксиса">1.7. Обзор синтаксиса</h3>
<div class="paragraph">
<p>Raku это язык <strong>со свободной формой написания</strong>: в большинстве случаев вы можете использовать сколько угодно пробелов, хоть и
в некоторых случаях пробелы имеют значение.</p>
</div>
<div class="paragraph">
<p><strong>Инструкции</strong> обычно являются логическими строками кода, они должны заканчиваться точкой с запятой:
<code>say "Hello" if True;</code></p>
</div>
<div class="paragraph">
<p><strong>Выражения</strong> являются особым типом инструкций, возвращающим значение:
<code>1+2</code> вернёт <code>3</code></p>
</div>
<div class="paragraph">
<p>Выражения состоят из <strong>Термов</strong> и <strong>Операторов</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Термами</strong> являются:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Переменные</strong>: значения, которые можно изменять.</p>
</li>
<li>
<p><strong>Литералы</strong>: константные значения вроде чисел или строк.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Классификация <strong>операторов</strong>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Тип</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Описание</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Пример</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Префиксный</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Перед термом</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>++1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Инфиксный</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Между термами</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1+2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Постфиксный</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">После терма</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1++</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Циркумфиксный</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Вокруг терма</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(1)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Постциркумфиксный</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">После одного терма и вокруг другого</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array[1]</code></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_идентификаторы">1.7.1. Идентификаторы</h4>
<div class="paragraph">
<p>Идентификаторы это имена, которые даются термам при определении.</p>
</div>
<div class="ulist">
<div class="title">Правила:</div>
<ul>
<li>
<p>Они должны начинаться с алфавитной буквы или с нижнего подчеркивания.</p>
</li>
<li>
<p>Они могут содержать цифры (за исключением первого символа).</p>
</li>
<li>
<p>Они могут содержать тире или апострофы (кроме первого и последнего знака), если есть алфавитная буква с правой стороны от каждого тире или апострофа.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Правильно</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Неправильно</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1var</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var-one</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var-one</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var'1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var1_</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var1'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_var</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-var</code></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title">Соглашения по именованию:</div>
<ul>
<li>
<p>Camel case: <code>variableNo1</code></p>
</li>
<li>
<p>Kebab case: <code>variable-no1</code></p>
</li>
<li>
<p>Snake case: <code>variable_no1</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Вы можете называть свои идентификаторы как пожелаете, но считается хорошей практикой постоянно использовать одно из соглашений во всём коде.</p>
</div>
<div class="paragraph">
<p>Использование осмысленных имён упростит вашу (и остальных) жизнь программиста.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>var1 = var2 * var3</code> синтаксически правильно, но смысл не очевиден.</p>
</li>
<li>
<p><code>monthly-salary = daily-rate * working-days</code> будет лучшим вариантом названий переменных.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_комментарии">1.7.2. Комментарии</h4>
<div class="paragraph">
<p>Комментарий - это текст, который игнорируется компилятором и используется для примечаний.</p>
</div>
<div class="paragraph">
<p>Комментарии делятся на три типа:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Однострочный:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-c1"># Это однострочный комментарий</span></code></pre>
</div>
</div>
</li>
<li>
<p>Встроенный:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-cm">#`(Это встроенный комментарий)</span> <span class="tok-s">&quot;Hello World.&quot;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Многострочный:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-cm">=begin comment</span>
<span class="tok-cm">Это многострочный комментарий.</span>
<span class="tok-cm">Комментарий 1</span>
<span class="tok-cm">Комментарий 2</span>
<span class="tok-cm">=end comment</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_кавычки">1.7.3. Кавычки</h4>
<div class="paragraph">
<p>Строки должны быть ограничены либо двойными, либо одиночными кавычками.</p>
</div>
<div class="paragraph">
<p>Всегда пользуйтесь двойным кавычками:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>если строка содержит апостроф</p>
</li>
<li>
<p>если строка содержит интерполируемую переменную.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&#39;Hello World&#39;</span>;    <span class="tok-c1"># Hello World</span>
<span class="tok-nb">say</span> <span class="tok-s">&quot;Hello World&quot;</span>;    <span class="tok-c1"># Hello World</span>
<span class="tok-nb">say</span> <span class="tok-s">&quot;Don&#39;t&quot;</span>;          <span class="tok-c1"># Don&#39;t</span>
<span class="tok-k">my</span> <span class="tok-nv">$name</span> = <span class="tok-s">&#39;John Doe&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&#39;Hello $name&#39;</span>;    <span class="tok-c1"># Hello $name</span>
<span class="tok-nb">say</span> <span class="tok-s">&quot;Hello $name&quot;</span>;    <span class="tok-c1"># Hello John Doe</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_операторы">2. Операторы</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_общие_операторы">2.1. Общие операторы</h3>
<div class="paragraph">
<p>В таблице ниже приведён список наиболее распространённых операторов.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 7.1428%;">
<col style="width: 7.1428%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5716%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Оператор</th>
<th class="tableblock halign-center valign-middle">Тип</th>
<th class="tableblock halign-left valign-middle">Описание</th>
<th class="tableblock halign-left valign-middle">Пример</th>
<th class="tableblock halign-left valign-middle">Результат</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Сложение</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1 + 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Вычитание</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3 - 1</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Умножение</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3 * 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>6</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>**</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Возведение в степень</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3 ** 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>9</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>/</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Деление</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3 / 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>div</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Целочисленное деление (округление вниз)</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3 div 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>%</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Остаток деления</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>7 % 4</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>%%</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Проверка делимости</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>6 %% 4</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>6 %% 3</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>gcd</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Наибольший общий делитель</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>6 gcd 9</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>lcm</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Наименьшее общее кратное</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>6 lcm 9</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>18</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>==</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Числовое равенство</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>9 == 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>!=</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Числовое неравенство</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>9!= 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>&lt;</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Меньше, чем</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>9 &lt; 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>&gt;</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Больше, чем</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>9 &gt; 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>&lt;=</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Меньше либо равно</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>7 &lt;= 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>&gt;=</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Больше либо равно</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>9 &gt;= 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>&lt;=&gt;</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock">Трёхстороннее сравнение</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1 &lt;=&gt; 1.0</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Same</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1 &lt;=&gt; 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Less</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3 &lt;=&gt; 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>More</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>eq</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Равенство строк</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"John" eq "John"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>ne</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Неравенство строк</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"John" ne "Jane"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>lt</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Строка меньше, чем</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"a" lt "b"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>gt</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Строка больше, чем</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"a" gt "b"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>le</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Строка меньше либо равна</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"a" le "a"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>ge</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Строка больше либо равна</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"a" ge" "b"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>leg</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock">Трёхстороннее сравнение строк</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"a" leg "a"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Same</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"a" leg "b"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Less</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"c" leg "b"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>More</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>cmp</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Умное трёхстороннее сравнение</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"a" cmp "b"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Less</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3.5 cmp 2.6</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>More</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>=</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Присвоение</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my $var = 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Присваивает переменной <code>$var</code> значение <code>7</code></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>~</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Конкатенация строк</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>9 ~ 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>97</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"Hi " ~ "there"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Hi there</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>x</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Умножение строк</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>13 x 3</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>131313</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"Hello " x 3</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Hello Hello Hello</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="5"><p class="tableblock"><code>~~</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="5"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="5"><p class="tableblock">Соответствие</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2 ~~ 2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2 ~~ Int</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"Perl 6" ~~ "Perl 6"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"Perl 6" ~~ Str</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>"enlightenment" ~~ /light/</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>｢light｣</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>++</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Инкремент</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my $var = 2; ++$var;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Прибавляет к значению переменной 1 и возвращает результат <code>3</code></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Постфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Инкремент</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my $var = 2; $var++;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Возвращает переменную <code>2</code> и приращивает его значение</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>--</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Декремент</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my $var = 2; --$var;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Уменьшает переменную на 1 и возвращает результат <code>1</code></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Постфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Декремент</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my $var = 2; $var--;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Возвращает переменную <code>2</code> и уменьшает его значение</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock">Приведение операнда к числовому значению</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>+"3"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>+True</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>+False</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="3"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock">Приведение операнда к числовому значению и отрицание</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-"3"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-True</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-False</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="6"><p class="tableblock"><code>?</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="6"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="6"><p class="tableblock">Приведение операнда к логическому значению</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>?0</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>?9.8</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>?"Hello"</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>?""</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my $var; ?$var;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my $var = 7; ?$var;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>True</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>!</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Приведение операнда к логическому значению и отрицание</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>!4</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>..</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Конструктор диапазона</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0..5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Создаёт диапазон интервала [0, 5] <sup class="footnote" id="_footnote_intervals">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>..^</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Конструктор диапазона</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0..^5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Создаёт диапазон интервала [0, 5) <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>^..</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Конструктор диапазона</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0^..5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Создаёт диапазон интервала (0, 5] <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>^..^</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Конструктор диапазона</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0^..^5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Создаёт диапазон интервала (0, 5) <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>^</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Конструктор диапазона</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>^5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Как и 0..^5, создаёт диапазон интервала [0, 5) <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>&#8230;&#8203;</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Инфиксный</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Конструктор "ленивого" списка</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0&#8230;&#8203;9999</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Возвращкет только затребованные элементы</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>|</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>Префиксный</code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Выравнивание</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>|(0..5)</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>(0 1 2 3 4 5)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>|(0^..^5)</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>(1 2 3 4)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_обратные_операторы">2.2. Обратные операторы</h3>
<div class="paragraph">
<p>Добавление <code>R</code> перед любым из операторов меняет местами операнды.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Обычная операция</th>
<th class="tableblock halign-left valign-middle">Результат</th>
<th class="tableblock halign-left valign-middle">Обратный оператор</th>
<th class="tableblock halign-left valign-middle">Результат</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2 / 3</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0.666667</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2 R/ 3</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2 - 1</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2 R- 1</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>-1</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_операторы_свёртки">2.3. Операторы свёртки</h3>
<div class="paragraph">
<p>Операторы свёртки работают со списками значений.
Они образуются квадратными скобками <code>[]</code> с обеих сторон оператора.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Обычная операция</th>
<th class="tableblock halign-left valign-middle">Результат</th>
<th class="tableblock halign-left valign-middle">Оператор свёртки</th>
<th class="tableblock halign-left valign-middle">Результат</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1 + 2 + 3 + 4 + 5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>15</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>[+] 1,2,3,4,5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>15</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1 * 2 * 3 * 4 * 5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>120</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>[*] 1,2,3,4,5</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>120</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
С более полным списком операторов и их старшинством вы можете ознакомиться на <a href="https://docs.raku.org/language/operators" class="bare">https://docs.raku.org/language/operators</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_переменные">3. Переменные</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Переменные Raku разделены на три категории: Скаляры, Массивы и Хеши.</p>
</div>
<div class="paragraph">
<p><strong>Сигил</strong> ("печать" на латыни) - это символ, который используется в качестве префикса, категоризирующего переменные.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$</code> используется со скалярами</p>
</li>
<li>
<p><code>@</code> используется с массивами</p>
</li>
<li>
<p><code>%</code> используется с хешами</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_скаляры">3.1. Скаляры</h3>
<div class="paragraph">
<p>Скаляр содержит одно значение или ссылку.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-c1"># Строка</span>
<span class="tok-k">my</span> <span class="tok-nv">$name</span> = <span class="tok-s">&#39;John Doe&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$name</span>;

<span class="tok-c1"># Целое число</span>
<span class="tok-k">my</span> <span class="tok-nv">$age</span> = <span class="tok-mi">99</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$age</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>К скаляру может быть применён определённый набор операций, зависящий от значения, которое он содержит.</p>
</div>
<div class="listingblock">
<div class="title">Строка</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$name</span> = <span class="tok-s">&#39;John Doe&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$name</span>.<span class="tok-nb">uc</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$name</span>.<span class="tok-nb">chars</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$name</span>.<span class="tok-nb">flip</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">JOHN</span> <span class="tok-n">DOE</span>
<span class="tok-mi">8</span>
<span class="tok-n">eoD</span> <span class="tok-n">nhoJ</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
С полным списком методов, применяемых к строкам, можно ознакомиться на <a href="https://docs.raku.org/type/Str" class="bare">https://docs.raku.org/type/Str</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Целое число</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$age</span> = <span class="tok-mi">17</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$age</span>.<span class="tok-nb">is-prime</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">True</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
С полным списком методов, применяемых к целым числам, можно ознакомиться на <a href="https://docs.raku.org/type/Int" class="bare">https://docs.raku.org/type/Int</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Рациональное число</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$age</span> = <span class="tok-mf">2.3</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$age</span>.<span class="tok-nb">numerator</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$age</span>.<span class="tok-nb">denominator</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$age</span>.<span class="tok-nb">nude</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-mi">23</span>
<span class="tok-mi">10</span>
(<span class="tok-mi">23</span> <span class="tok-mi">10</span>)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
С полным списком методов, применяемых к рациональным числам, можно ознакомиться на <a href="https://docs.raku.org/type/Rat" class="bare">https://docs.raku.org/type/Rat</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_массивы">3.2. Массивы</h3>
<div class="paragraph">
<p>Массивы являются списками, содержащими множество значений.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@animals</span> = <span class="tok-s">&#39;camel&#39;</span>,<span class="tok-s">&#39;llama&#39;</span>,<span class="tok-s">&#39;owl&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@animals</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Как показано на примере ниже, есть множество встроенных операций над массивами:</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Тильда <code>~</code> используется для конкатенации строк.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title"><code>Скрипт</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@animals</span> = <span class="tok-s">&#39;camel&#39;</span>,<span class="tok-s">&#39;vicuña&#39;</span>,<span class="tok-s">&#39;llama&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;The zoo contains &quot;</span> ~ <span class="tok-nv">@animals</span>.<span class="tok-nb">elems</span> ~ <span class="tok-s">&quot; animals&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;The animals are: &quot;</span> ~ <span class="tok-nv">@animals</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;I will adopt an owl for the zoo&quot;</span>;
<span class="tok-nv">@animals</span>.<span class="tok-nb">push</span>(<span class="tok-s">&quot;owl&quot;</span>);
<span class="tok-nb">say</span> <span class="tok-s">&quot;Now my zoo has: &quot;</span> ~ <span class="tok-nv">@animals</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;The first animal we adopted was the &quot;</span> ~ <span class="tok-nv">@animals</span>[<span class="tok-mi">0</span>];
<span class="tok-nv">@animals</span>.<span class="tok-nb">pop</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Unfortunately the owl got away and we&#39;re left with: &quot;</span> ~ <span class="tok-nv">@animals</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;We&#39;re closing the zoo and keeping one animal only&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;We&#39;re going to let go: &quot;</span> ~ <span class="tok-nv">@animals</span>.<span class="tok-nb">splice</span>(<span class="tok-mi">1</span>,<span class="tok-mi">2</span>) ~ <span class="tok-s">&quot; and keep the &quot;</span> ~ <span class="tok-nv">@animals</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">The</span> <span class="tok-n">zoo</span> <span class="tok-nb">contains</span> <span class="tok-mi">3</span> <span class="tok-n">animals</span>
<span class="tok-n">The</span> <span class="tok-n">animals</span> <span class="tok-n">are:</span> <span class="tok-n">camel</span> <span class="tok-n">vicuña</span> <span class="tok-n">llama</span>
<span class="tok-n">I</span> <span class="tok-n">will</span> <span class="tok-n">adopt</span> <span class="tok-n">an</span> <span class="tok-n">owl</span> <span class="tok-k">for</span> <span class="tok-n">the</span> <span class="tok-n">zoo</span>
<span class="tok-n">Now</span> <span class="tok-k">my</span> <span class="tok-n">zoo</span> <span class="tok-n">has:</span> <span class="tok-n">camel</span> <span class="tok-n">vicuña</span> <span class="tok-n">llama</span> <span class="tok-n">owl</span>
<span class="tok-n">The</span> <span class="tok-nb">first</span> <span class="tok-n">animal</span> <span class="tok-n">we</span> <span class="tok-n">adopted</span> <span class="tok-n">was</span> <span class="tok-n">the</span> <span class="tok-n">camel</span>
<span class="tok-n">Unfortunately</span> <span class="tok-n">the</span> <span class="tok-n">owl</span> <span class="tok-nb">got</span> <span class="tok-n">away</span> <span class="tok-o">and</span> <span class="tok-n">we&#39;re</span> <span class="tok-n">left</span> <span class="tok-n">with:</span> <span class="tok-n">camel</span> <span class="tok-n">vicuña</span> <span class="tok-n">llama</span>
<span class="tok-n">We&#39;re</span> <span class="tok-n">closing</span> <span class="tok-n">the</span> <span class="tok-n">zoo</span> <span class="tok-o">and</span> <span class="tok-n">keeping</span> <span class="tok-nb">one</span> <span class="tok-n">animal</span> <span class="tok-n">only</span>
<span class="tok-n">We&#39;re</span> <span class="tok-n">going</span> <span class="tok-nb">to</span> <span class="tok-k">let</span> <span class="tok-n">go:</span> <span class="tok-n">vicuña</span> <span class="tok-n">llama</span> <span class="tok-o">and</span> <span class="tok-nb">keep</span> <span class="tok-n">the</span> <span class="tok-n">camel</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p><code>.elems</code> возвращает количество элементов в массиве.<br>
<code>.push()</code> добавляет один или более элементов в массив.<br>
Мы можем получить доступ к конкретному элементу массива через указание его индекса <code>@animals[0]</code>.<br>
<code>.pop</code> удаляет последний элемент массива и возвращает его<br>
<code>.splice(a,b)</code> удалит <code>b</code> элементов, начиная с индекса <code>a</code>.</p>
</div>
<div class="sect3">
<h4 id="_массивы_с_фиксированным_размером">3.2.1. Массивы с фиксированным размером</h4>
<div class="paragraph">
<p>Обычный массив объявляется так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Обычный массив может иметь неограниченную длину, и поэтому он называется автоматически расширяющимся.<br>
В массив можно добавить любое количество значений без ограничений.</p>
</div>
<div class="paragraph">
<p>Кроме того, мы также можем создавать массивы с фиксированным размером.<br>
К значениям по индексу, превышающему заданный размер, нельзя обращаться.</p>
</div>
<div class="paragraph">
<p>Чтобы объявить массив с фиксированным размером, обозначьте максимальное количество элементов в квадратных скобках сразу после его имени:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span>[<span class="tok-mi">3</span>];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Этот массив будет хранить не более 3 значений, с индексами от 0 до 2.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span>[<span class="tok-mi">3</span>];
<span class="tok-nv">@array</span>[<span class="tok-mi">0</span>] = <span class="tok-s">&quot;first value&quot;</span>;
<span class="tok-nv">@array</span>[<span class="tok-mi">1</span>] = <span class="tok-s">&quot;second value&quot;</span>;
<span class="tok-nv">@array</span>[<span class="tok-mi">2</span>] = <span class="tok-s">&quot;third value&quot;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вы не сможете добавить в этот массив четвёртый элемент:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span>[<span class="tok-mi">3</span>];
<span class="tok-nv">@array</span>[<span class="tok-mi">0</span>] = <span class="tok-s">&quot;first value&quot;</span>;
<span class="tok-nv">@array</span>[<span class="tok-mi">1</span>] = <span class="tok-s">&quot;second value&quot;</span>;
<span class="tok-nv">@array</span>[<span class="tok-mi">2</span>] = <span class="tok-s">&quot;third value&quot;</span>;
<span class="tok-nv">@array</span>[<span class="tok-mi">3</span>] = <span class="tok-s">&quot;fourth value&quot;</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Index</span> <span class="tok-mi">3</span> <span class="tok-k">for</span> <span class="tok-n">dimension</span> <span class="tok-mi">1</span> <span class="tok-n">out</span> <span class="tok-nb">of</span> <span class="tok-nb">range</span> (<span class="tok-n">must</span> <span class="tok-n">be</span> <span class="tok-mi">0</span><span class="tok-o">..</span><span class="tok-mi">2</span>)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_многомерный_массив">3.2.2. Многомерный массив</h4>
<div class="paragraph">
<p>Массивы, которые мы видели до сих пор, были одномерными.<br>
К счастью, мы можем работать с многомерными массивами в Raku.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@tbl</span>[<span class="tok-mi">3</span>;<span class="tok-mi">2</span>];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Этот массив является двумерным.
Первое измерение может содержать максимум три значения, а второе - только две.</p>
</div>
<div class="paragraph">
<p>Представляйте сетку значений 3x2 .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@tbl</span>[<span class="tok-mi">3</span>;<span class="tok-mi">2</span>];
<span class="tok-nv">@tbl</span>[<span class="tok-mi">0</span>;<span class="tok-mi">0</span>] = <span class="tok-mi">1</span>;
<span class="tok-nv">@tbl</span>[<span class="tok-mi">0</span>;<span class="tok-mi">1</span>] = <span class="tok-s">&quot;x&quot;</span>;
<span class="tok-nv">@tbl</span>[<span class="tok-mi">1</span>;<span class="tok-mi">0</span>] = <span class="tok-mi">2</span>;
<span class="tok-nv">@tbl</span>[<span class="tok-mi">1</span>;<span class="tok-mi">1</span>] = <span class="tok-s">&quot;y&quot;</span>;
<span class="tok-nv">@tbl</span>[<span class="tok-mi">2</span>;<span class="tok-mi">0</span>] = <span class="tok-mi">3</span>;
<span class="tok-nv">@tbl</span>[<span class="tok-mi">2</span>;<span class="tok-mi">1</span>] = <span class="tok-s">&quot;z&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@tbl</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>[[<span class="tok-mi">1</span> <span class="tok-nb">x</span>] [<span class="tok-mi">2</span> <span class="tok-n">y</span>] [<span class="tok-mi">3</span> <span class="tok-nb">z</span>]]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Визуальное отображение массива:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>[<span class="tok-mi">1</span> <span class="tok-nb">x</span>]
[<span class="tok-mi">2</span> <span class="tok-n">y</span>]
[<span class="tok-mi">3</span> <span class="tok-nb">z</span>]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Более подробно с типом Array можно ознакомиться на <a href="https://docs.raku.org/type/Array" class="bare">https://docs.raku.org/type/Array</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_хеши">3.3. Хеши</h3>
<div class="listingblock">
<div class="title">Хеш - это набор пар ключ-значение.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">%capitals</span> = (<span class="tok-s">&#39;UK&#39;</span>,<span class="tok-s">&#39;London&#39;</span>,<span class="tok-s">&#39;Germany&#39;</span>,<span class="tok-s">&#39;Berlin&#39;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">%capitals</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ещё один простой способ заполнить хеш:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">%capitals</span> = (<span class="tok-n">UK</span> =&gt; <span class="tok-s">&#39;London&#39;</span>, <span class="tok-n">Germany</span> =&gt; <span class="tok-s">&#39;Berlin&#39;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">%capitals</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот несколько методов, определённых для хешей:</p>
</div>
<div class="listingblock">
<div class="title"><code>Скрипт</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">%capitals</span> = (<span class="tok-n">UK</span> =&gt; <span class="tok-s">&#39;London&#39;</span>, <span class="tok-n">Germany</span> =&gt; <span class="tok-s">&#39;Berlin&#39;</span>);
<span class="tok-nv">%capitals</span>.<span class="tok-n">push:</span> (<span class="tok-n">France</span> =&gt; <span class="tok-s">&#39;Paris&#39;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">%capitals</span>.<span class="tok-nb">kv</span>;
<span class="tok-nb">say</span> <span class="tok-nv">%capitals</span>.<span class="tok-nb">keys</span>;
<span class="tok-nb">say</span> <span class="tok-nv">%capitals</span>.<span class="tok-nb">values</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;The capital of France is: &quot;</span> ~ <span class="tok-nv">%capitals&lt;France&gt;</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>(<span class="tok-n">France</span> <span class="tok-n">Paris</span> <span class="tok-n">Germany</span> <span class="tok-n">Berlin</span> <span class="tok-n">UK</span> <span class="tok-n">London</span>)
(<span class="tok-n">France</span> <span class="tok-n">Germany</span> <span class="tok-n">UK</span>)
(<span class="tok-n">Paris</span> <span class="tok-n">Berlin</span> <span class="tok-n">London</span>)
<span class="tok-n">The</span> <span class="tok-n">capital</span> <span class="tok-nb">of</span> <span class="tok-n">France</span> <span class="tok-n">is:</span> <span class="tok-n">Paris</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p><code>.push: (key =&gt; 'Value')</code> добавляет новую пару ключ-значение.<br>
<code>.kv</code> возвращает список, содержащий все ключи и значения.<br>
<code>.keys</code> возвращает список, содержащий все ключи.<br>
<code>.values</code> возвращает список, содержащий все значения.<br>
Мы можем получить доступ к отдельному значению в хеше, указав его ключ <code>%hash&lt;key&gt;</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Более подробно с типом Hash можно ознакомиться на <a href="https://docs.raku.org/type/Hash" class="bare">https://docs.raku.org/type/Hash</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_типы">3.4. Типы</h3>
<div class="paragraph">
<p>В прошлых примерах мы не определяли тип значения для переменных.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>.WHAT</code> вернёт тип значения переменной.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span> = <span class="tok-s">&#39;Text&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>.<span class="tok-nb">WHAT</span>;

<span class="tok-nv">$var</span> = <span class="tok-mi">123</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>.<span class="tok-nb">WHAT</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Как вы можете видеть на примере выше, тип значения <code>$var</code> был сначала (Str), а потом стал (Int).</p>
</div>
<div class="paragraph">
<p>Этот стиль программирования называется динамической типизацией. Динамическая в том плане, что переменные могут содержать значения любого типа.</p>
</div>
<div class="paragraph">
<p>А сейчас попробуйте запустить следующий пример:<br>
Обратите внимание на <code>Int</code> перед именем переменной.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span> = <span class="tok-s">&#39;Text&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>.<span class="tok-nb">WHAT</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Этот код завершится исключением с таким сообщением: <code>Type check failed in assignment to $var; expected Int but got Str</code>.</p>
</div>
<div class="paragraph">
<p>Произошло вот что - мы заранее определили, что переменная должна быть типа (Int).
Когда же мы попытались присвоить ей (Str), было сгенерировано исключение и выполнение программы прекратилось.</p>
</div>
<div class="paragraph">
<p>Этот стиль программирования называется статической типизацией. Статическая, потому что типы переменных были заданы до присваивания и их нельзя изменить.</p>
</div>
<div class="paragraph">
<p>Raku классифицируется как язык с <strong>постепенной типизацией</strong>; он позволяет использовать и <strong>статическую</strong>, и <strong>динамическую</strong> типизацию.</p>
</div>
<div class="listingblock">
<div class="title">Массивы и хеши тоже могут быть статически типизированы:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">@array</span> = <span class="tok-mi">1</span>,<span class="tok-mi">2</span>,<span class="tok-mi">3</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@array</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@array</span>.<span class="tok-nb">WHAT</span>;

<span class="tok-k">my</span> <span class="tok-nb">Str</span> <span class="tok-nv">@multilingual</span> = <span class="tok-s">&quot;Hello&quot;</span>,<span class="tok-s">&quot;Salut&quot;</span>,<span class="tok-s">&quot;Hallo&quot;</span>,<span class="tok-s">&quot;您好&quot;</span>,<span class="tok-s">&quot;안녕하세요&quot;</span>,<span class="tok-s">&quot;こんにちは&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@multilingual</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@multilingual</span>.<span class="tok-nb">WHAT</span>;

<span class="tok-k">my</span> <span class="tok-nb">Str</span> <span class="tok-nv">%capitals</span> = (<span class="tok-n">UK</span> =&gt; <span class="tok-s">&#39;London&#39;</span>, <span class="tok-n">Germany</span> =&gt; <span class="tok-s">&#39;Berlin&#39;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">%capitals</span>;
<span class="tok-nb">say</span> <span class="tok-nv">%capitals</span>.<span class="tok-nb">WHAT</span>;

<span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">%country-codes</span> = (<span class="tok-n">UK</span> =&gt; <span class="tok-mi">44</span>, <span class="tok-n">Germany</span> =&gt; <span class="tok-mi">49</span>);
<span class="tok-nb">say</span> <span class="tok-nv">%country-codes</span>;
<span class="tok-nb">say</span> <span class="tok-nv">%country-codes</span>.<span class="tok-nb">WHAT</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Ниже - список наиболее часто используемых типов:</div>
<p>Вы, скорее всего, никогда не будете использовать первые два и они упоминаются в ознакомительных целях.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 28.5714%;">
<col style="width: 14.2858%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code><strong>Тип</strong></code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code><strong>Описание</strong></code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code><strong>Пример</strong></code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code><strong>Результат</strong></code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Mu</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Базовый тип иерархии типов в Raku</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Any</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Базовый класс по умолчанию для новых классов и для большинства встроенных классов</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Cool</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Значение, которое можно взаимозаменяемо использовать и как строку и как число</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my Cool $var = 31; say $var.flip; say $var * 2;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>13 62</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Str</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Строка символов</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>my Str $var = "NEON"; say $var.flip;</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>NOEN</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Int</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Целое число (произвольной точности)</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>7 + 7</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>14</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Rat</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Рациональное число (ограниченной точности)</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0.1 + 0.2</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0.3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Bool</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Булево значение</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>!True</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>False</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_интроспекция">3.5. Интроспекция</h3>
<div class="paragraph">
<p>Интроспекция - это процесс получения информации о свойствах объекта, например, его типе.<br>
В одном из прошлых примеров мы использовали <code>.WHAT</code> для получения типов переменной.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>.<span class="tok-nb">WHAT</span>;    <span class="tok-c1"># (Int)</span>
<span class="tok-k">my</span> <span class="tok-nv">$var2</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var2</span>.<span class="tok-nb">WHAT</span>;   <span class="tok-c1"># (Any)</span>
<span class="tok-nv">$var2</span> = <span class="tok-mi">1</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var2</span>.<span class="tok-nb">WHAT</span>;   <span class="tok-c1"># (Int)</span>
<span class="tok-nv">$var2</span> = <span class="tok-s">&quot;Hello&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var2</span>.<span class="tok-nb">WHAT</span>;   <span class="tok-c1"># (Str)</span>
<span class="tok-nv">$var2</span> = <span class="tok-nb">True</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var2</span>.<span class="tok-nb">WHAT</span>;   <span class="tok-c1"># (Bool)</span>
<span class="tok-nv">$var2</span> = <span class="tok-nb">Nil</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var2</span>.<span class="tok-nb">WHAT</span>;   <span class="tok-c1"># (Any)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Тип переменной, содержащей значение, зависит от этого значения.<br>
Тип строго определённой пустой переменной будет тем типом, который был объявлен.<br>
Пустая переменная без объявленного типа будет иметь тип <code>Any</code>.<br>
Чтобы обнулить значение переменной, присвойте ей <code>Nil</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_область_видимости">3.6. Область видимости</h3>
<div class="paragraph">
<p>Прежде чем использовать переменную впервые, она должен быть объявлена.</p>
</div>
<div class="paragraph">
<p>В Raku используют несколько вариантов объявления области видимости. Пока что мы использовали только <code>my</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span>=<span class="tok-mi">1</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Объявление области видимости <code>my</code> присваивает переменной <strong>лексическую</strong> область видимости.
Иными словами, переменная будет доступна только в пределах блока, в котором она была объявлена.</p>
</div>
<div class="paragraph">
<p>Блок в  Raku обозначается <code>{ }</code>.
Переменные, объявленные за пределами блока, будут доступны во всем скрипте.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>{
  <span class="tok-k">my</span> <span class="tok-nb">Str</span> <span class="tok-nv">$var</span> = <span class="tok-s">&#39;Text&#39;</span>;
  <span class="tok-nb">say</span> <span class="tok-nv">$var</span>;   <span class="tok-c1"># достижима</span>
}
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;   <span class="tok-c1"># не достижима, вернёт ошибку</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Так как переменная видима только в её блоке, такое же имя переменной может быть использовано в другом блоке.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>{
  <span class="tok-k">my</span> <span class="tok-nb">Str</span> <span class="tok-nv">$var</span> = <span class="tok-s">&#39;Text&#39;</span>;
  <span class="tok-nb">say</span> <span class="tok-nv">$var</span>;
}
<span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span> = <span class="tok-mi">123</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_присваивание_vs_привязывание">3.7. Присваивание vs. Привязывание</h3>
<div class="paragraph">
<p>В предыдущем примере мы видели, как <strong>присвоить</strong> значение к переменной.<br>
<strong>Присвоение</strong> совершается используя оператор <code>=</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span> = <span class="tok-mi">123</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы можем изменить значение, присвоенное переменной:</p>
</div>
<div class="listingblock">
<div class="title">Присваивание</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span> = <span class="tok-mi">123</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;
<span class="tok-nv">$var</span> = <span class="tok-mi">999</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-mi">123</span>
<span class="tok-mi">999</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>С другой стороны, мы не можем изменить значение, которое было <strong>привязано</strong> к переменной.<br>
<strong>Привязка</strong> (binding) совершается с использованием оператора <code>:=</code>.</p>
</div>
<div class="listingblock">
<div class="title">Привязка</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span> := <span class="tok-mi">123</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;
<span class="tok-nv">$var</span> = <span class="tok-mi">999</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-mi">123</span>
<span class="tok-n">Cannot</span> <span class="tok-n">assign</span> <span class="tok-nb">to</span> <span class="tok-n">an</span> <span class="tok-n">immutable</span> <span class="tok-nb">value</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Переменные также можно привязывать к другим переменным:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$a</span>;
<span class="tok-k">my</span> <span class="tok-nv">$b</span>;
<span class="tok-nv">$b</span> := <span class="tok-nv">$a</span>;
<span class="tok-nv">$a</span> = <span class="tok-mi">7</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$b</span>;
<span class="tok-nv">$b</span> = <span class="tok-mi">8</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$a</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-mi">7</span>
<span class="tok-mi">8</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Привязка переменных является двунаправленной.<br>
<code>$a := $b</code> и <code>$b := $a</code> имеют один и тот же результат.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Больше о переменных можно узнать на <a href="https://docs.perl6.org/language/variables" class="bare">https://docs.perl6.org/language/variables</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_функции_и_мутаторы">4. Функции и мутаторы</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Важно различать функции и мутаторы.<br>
Функции не меняют состояние объекта, к которому они применяются.<br>
Мутаторы же вносят изменения в состояние объекта.</p>
</div>
<div class="listingblock">
<div class="title"><code>Скрипт</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="tok-k">my</span> <span class="tok-nv">@numbers</span> = [<span class="tok-mi">7</span>,<span class="tok-mi">2</span>,<span class="tok-mi">4</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">3</span>];

<span class="tok-nv">@numbers</span>.<span class="tok-nb">push</span>(<span class="tok-mi">99</span>);
<span class="tok-nb">say</span> <span class="tok-nv">@numbers</span>;      <span class="tok-c1">#1</span>

<span class="tok-nb">say</span> <span class="tok-nv">@numbers</span>.<span class="tok-nb">sort</span>; <span class="tok-c1">#2</span>
<span class="tok-nb">say</span> <span class="tok-nv">@numbers</span>;      <span class="tok-c1">#3</span>

<span class="tok-nv">@numbers</span>.=<span class="tok-nb">sort</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@numbers</span>;      <span class="tok-c1">#4</span>
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>[<span class="tok-mi">7</span> <span class="tok-mi">2</span> <span class="tok-mi">4</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">3</span> <span class="tok-mi">99</span>] <span class="tok-c1">#1</span>
(<span class="tok-mi">2</span> <span class="tok-mi">3</span> <span class="tok-mi">4</span> <span class="tok-mi">7</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">99</span>) <span class="tok-c1">#2</span>
[<span class="tok-mi">7</span> <span class="tok-mi">2</span> <span class="tok-mi">4</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">3</span> <span class="tok-mi">99</span>] <span class="tok-c1">#3</span>
[<span class="tok-mi">2</span> <span class="tok-mi">3</span> <span class="tok-mi">4</span> <span class="tok-mi">7</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">99</span>] <span class="tok-c1">#4</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p><code>.push</code> - мутатор; он изменяет состояние массива (#1)</p>
</div>
<div class="paragraph">
<p><code>.sort</code> - функция; она возвращает отсортированный массив, но не изменяет состояние изначального массива:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(#2) показывает, что она вернула отсортированный массив.</p>
</li>
<li>
<p>(#3) показывает, что начальный массив не изменился.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Чтобы заставить функцию работать в качестве мутатора, можно использовать <code>.=</code> вместо <code>.</code> (#4) (строка 9 в скрипте)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_циклы_и_условия">5. Циклы и условия</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В Raku есть много способов описать условие и цикл.</p>
</div>
<div class="sect2">
<h3 id="_if">5.1. if</h3>
<div class="paragraph">
<p>Код выполняется только при соблюдённом условии; то есть вычисленное выражение равно <code>True</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$age</span> = <span class="tok-mi">19</span>;

<span class="tok-k">if</span> <span class="tok-nv">$age</span> &gt; <span class="tok-mi">18</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;Welcome&#39;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В Raku вы можем поменять местами код и условие.<br>
Даже если условие определено после кода, оно всегда будет проверяться в первую очередь.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$age</span> = <span class="tok-mi">19</span>;

<span class="tok-nb">say</span> <span class="tok-s">&#39;Welcome&#39;</span> <span class="tok-k">if</span> <span class="tok-nv">$age</span> &gt; <span class="tok-mi">18</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если условие не соблюдено, можно описать другой блок для выполнения, используя:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>else</code></p>
</li>
<li>
<p><code>elsif</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-c1"># запускаем тот же самый код с разными значениями переменной</span>
<span class="tok-k">my</span> <span class="tok-nv">$number-of-seats</span> = <span class="tok-mi">9</span>;

<span class="tok-k">if</span> <span class="tok-nv">$number-of-seats</span> &lt;= <span class="tok-mi">5</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;I am a sedan&#39;</span>
} <span class="tok-k">elsif</span> <span class="tok-nv">$number-of-seats</span> &lt;= <span class="tok-mi">7</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;I am 7 seater&#39;</span>
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;I am a van&#39;</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_unless">5.2. unless</h3>
<div class="paragraph">
<p>Противоположность оператора <code>if</code> - <code>unless</code>.</p>
</div>
<div class="paragraph">
<p>Данный код:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$clean-shoes</span> = <span class="tok-nb">False</span>;

<span class="tok-k">if</span> <span class="tok-nb">not</span> <span class="tok-nv">$clean-shoes</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;Clean your shoes&#39;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>может быть записан так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$clean-shoes</span> = <span class="tok-nb">False</span>;

<span class="tok-k">unless</span> <span class="tok-nv">$clean-shoes</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;Clean your shoes&#39;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Логическое отрицание в Raku осуществляется с помощью <code>!</code> или <code>not</code>.</p>
</div>
<div class="paragraph">
<p><code>unless (условие)</code> обычно используется вместо <code>if not (условие)</code>.</p>
</div>
<div class="paragraph">
<p><code>unless</code> не может иметь ветку <code>else</code> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_with">5.3. with</h3>
<div class="paragraph">
<p><code>with</code> действует как и инструкция <code>if</code>, но проверяет, определена ли переменная.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span>=<span class="tok-mi">1</span>;

<span class="tok-k">with</span> <span class="tok-nv">$var</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;Hello&#39;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если вы запустите код без присвоения значения переменной, ничего не произойдёт.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$var</span>;

<span class="tok-k">with</span> <span class="tok-nv">$var</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&#39;Hello&#39;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>without</code> является противоположностью <code>with</code>. Эту конструкцию можно сравнить с <code>unless</code>.</p>
</div>
<div class="paragraph">
<p>Если первое условие <code>with</code> не соблюдено, можно описать альтернативную ветка используя <code>orwith</code>.<br>
<code>with</code> и <code>orwith</code> можно сравнить с <code>if</code> и <code>elsif</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_for">5.4. for</h3>
<div class="paragraph">
<p>Цикл <code>for</code> обходит множество значений.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = [<span class="tok-mi">1</span>,<span class="tok-mi">2</span>,<span class="tok-mi">3</span>];

<span class="tok-k">for</span> <span class="tok-nv">@array</span> -&gt; <span class="tok-nv">$array-item</span> {
  <span class="tok-nb">say</span> <span class="tok-nv">$array-item</span> * <span class="tok-mi">100</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Обратите внимание, что мы создали переменную цикла <code>$array-item</code>, а затем осуществили операцию <code>*100</code> над каждым из элементов массива.</p>
</div>
</div>
<div class="sect2">
<h3 id="_given">5.5. given</h3>
<div class="paragraph">
<p><code>given</code> - эквивалент конструкции "switch" в других языках,
но намного круче.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span> = <span class="tok-mi">42</span>;

<span class="tok-k">given</span> <span class="tok-nv">$var</span> {
    <span class="tok-k">when</span> <span class="tok-mi">0</span><span class="tok-o">..</span><span class="tok-mi">50</span> { <span class="tok-nb">say</span> <span class="tok-s">&#39;Less than or equal to 50&#39;</span>}
    <span class="tok-k">when</span> <span class="tok-nb">Int</span> { <span class="tok-nb">say</span> <span class="tok-s">&quot;is an Int&quot;</span> }
    <span class="tok-k">when</span> <span class="tok-mi">42</span>  { <span class="tok-nb">say</span> <span class="tok-mi">42</span> }
    <span class="tok-k">default</span>  { <span class="tok-nb">say</span> <span class="tok-s">&quot;huh?&quot;</span> }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>После первого успешного сравнения, процесс выбора остановится.</p>
</div>
<div class="paragraph">
<p>Если необходимо, <code>proceed</code> позволяет продолжить проверку даже после первого успешного сопоставления.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span> = <span class="tok-mi">42</span>;

<span class="tok-k">given</span> <span class="tok-nv">$var</span> {
    <span class="tok-k">when</span> <span class="tok-mi">0</span><span class="tok-o">..</span><span class="tok-mi">50</span> { <span class="tok-nb">say</span> <span class="tok-s">&#39;Less than or equal to 50&#39;</span>;<span class="tok-k">proceed</span>}
    <span class="tok-k">when</span> <span class="tok-nb">Int</span> { <span class="tok-nb">say</span> <span class="tok-s">&quot;is an Int&quot;</span>;<span class="tok-k">proceed</span>}
    <span class="tok-k">when</span> <span class="tok-mi">42</span>  { <span class="tok-nb">say</span> <span class="tok-mi">42</span> }
    <span class="tok-k">default</span>  { <span class="tok-nb">say</span> <span class="tok-s">&quot;huh?&quot;</span> }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_loop">5.6. loop</h3>
<div class="paragraph">
<p><code>loop</code> - ещё один способ написать цикл <code>for</code>.</p>
</div>
<div class="paragraph">
<p>На самом деле, <code>loop</code> - это то, как циклы <code>for</code> записываются в семействе языков программирования C.</p>
</div>
<div class="paragraph">
<p>Raku принадлежит к этому семейству.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">loop</span> (<span class="tok-k">my</span> <span class="tok-nv">$i</span> = <span class="tok-mi">0</span>; <span class="tok-nv">$i</span> &lt; <span class="tok-mi">5</span>; <span class="tok-nv">$i</span>++) {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;The current number is $i&quot;</span>
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Больше о циклах и условиях можно узнать на <a href="https://docs.raku.org/language/control" class="bare">https://docs.raku.org/language/control</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ввод_вывод">6. Ввод-вывод</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В Raku, два наиболее распространённых интерфейса <em>ввода-вывода</em> это <em>Эмулятор терминала</em> и <em>Файлы</em>.</p>
</div>
<div class="sect2">
<h3 id="_базовый_ввод_вывод_в_коммандной_строке">6.1. Базовый ввод-вывод в коммандной строке</h3>
<div class="sect3">
<h4 id="_say">6.1.1. say</h4>
<div class="paragraph">
<p><code>say</code> делает вывод в стандартный поток вывода. Он добавляет символ перевода строки в конце. Иначе говоря, этот код:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&#39;Hello Mam.&#39;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&#39;Hello Sir.&#39;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>будет выведен как две раздельные строки.</p>
</div>
</div>
<div class="sect3">
<h4 id="_print">6.1.2. print</h4>
<div class="paragraph">
<p><code>print</code>, с другой стороны, действует как <code>say</code>, но не добавляет символ новой строки.</p>
</div>
<div class="paragraph">
<p>Попробуйте заменить <code>say</code> на <code>print</code> и сравните результаты.</p>
</div>
</div>
<div class="sect3">
<h4 id="_get">6.1.3. get</h4>
<div class="paragraph">
<p><code>get</code> используется для получения ввода из командной строки.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$name</span>;

<span class="tok-nb">say</span> <span class="tok-s">&quot;Hi, what&#39;s your name?&quot;</span>;
<span class="tok-nv">$name</span> = <span class="tok-nb">get</span>;

<span class="tok-nb">say</span> <span class="tok-s">&quot;Dear $name welcome to Raku&quot;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>После запуска кода выше, строка будет ожидать ввода имени. Введите его и нажмите [Enter].
Далее, код поприветствует вас.</p>
</div>
</div>
<div class="sect3">
<h4 id="_prompt">6.1.4. prompt</h4>
<div class="paragraph">
<p><code>prompt</code> - это комбинация <code>print</code> и <code>get</code>.</p>
</div>
<div class="paragraph">
<p>Пример выше может быть записан так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$name</span> = <span class="tok-nb">prompt</span> <span class="tok-s">&quot;Hi, what&#39;s your name? &quot;</span>;

<span class="tok-nb">say</span> <span class="tok-s">&quot;Dear $name welcome to Raku&quot;</span>;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_запуск_shell_команд">6.2. Запуск shell-команд</h3>
<div class="paragraph">
<p>Чтобы запустить команду в командной оболочке, могут быть использованы две подпрограммы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>run</code> запускает внешнюю команду без вызова командной оболочки</p>
</li>
<li>
<p><code>shell</code> запускает команду через системную командную оболочку. Она зависит от платформы и стандартной командной оболочки текущего пользователя.
Все метасимволы командной оболочки интерпретируются ею, включая конвейеры, перенаправления, подстановку переменных окружения и так далее.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Запустите это, если вы пользуетесь Linux/macOS</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$name</span> = <span class="tok-s">&#39;Neo&#39;</span>;
<span class="tok-nb">run</span> <span class="tok-s">&#39;echo&#39;</span>, <span class="tok-s">&quot;hello $name&quot;</span>;
<span class="tok-nb">shell</span> <span class="tok-s">&quot;ls&quot;</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Запустите это, если вы пользуетесь Windows</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">shell</span> <span class="tok-s">&quot;dir&quot;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>echo</code> и <code>ls</code> - распространённые команды оболочки в Linux:<br>
<code>echo</code> выводит текст в эмулятор терминала (эквивалент <code>print</code> в Perl 6)<br>
<code>ls</code> выводит список всех файлов и папок в текущей директории</p>
</div>
<div class="paragraph">
<p><code>dir</code> эквивалент <code>ls</code> в Windows.</p>
</div>
</div>
<div class="sect2">
<h3 id="_файловый_ввод_вывод">6.3. Файловый ввод-вывод</h3>
<div class="sect3">
<h4 id="_slurp">6.3.1. slurp</h4>
<div class="paragraph">
<p><code>slurp</code> используется для чтения данных из файла.</p>
</div>
<div class="paragraph">
<p>Создайте текстовый файл со следующим содержанием:</p>
</div>
<div class="listingblock">
<div class="title">datafile.txt</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">John</span> <span class="tok-mi">9</span>
<span class="tok-n">Johnnie</span> <span class="tok-mi">7</span>
<span class="tok-n">Jane</span> <span class="tok-mi">8</span>
<span class="tok-n">Joanna</span> <span class="tok-mi">7</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$data</span> = <span class="tok-nb">slurp</span> <span class="tok-s">&quot;datafile.txt&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$data</span>;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spurt">6.3.2. spurt</h4>
<div class="paragraph">
<p><code>spurt</code> используется для записи данных в файл.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$newdata</span> = <span class="tok-s">&quot;New scores:</span>
<span class="tok-s">Paul 10</span>
<span class="tok-s">Paulie 9</span>
<span class="tok-s">Paulo 11&quot;</span>;

<span class="tok-nb">spurt</span> <span class="tok-s">&quot;newdatafile.txt&quot;</span>, <span class="tok-nv">$newdata</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>После запуска кода выше, будет создан новый файл <em>newdatafile.txt</em>. Он будет содержать новые оценки.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_работа_с_файлами_и_директориями">6.4. Работа с файлами и директориями</h3>
<div class="paragraph">
<p>В Raku можно получить список содержимого директории, не прибегая к командам оболочки вроде <code>ls</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-nb">dir</span>;                <span class="tok-c1"># Перечисляет файлы и папки в текущей директории</span>
<span class="tok-nb">say</span> <span class="tok-nb">dir</span> <span class="tok-s">&quot;/Documents&quot;</span>;   <span class="tok-c1"># Перечисляет файлы и папки в указанной директории</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Также вы можете создавать и удалять директории.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">mkdir</span> <span class="tok-s">&quot;newfolder&quot;</span>;
<span class="tok-nb">rmdir</span> <span class="tok-s">&quot;newfolder&quot;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>mkdir</code> создаёт новую директорию.<br>
<code>rmdir</code> удаляет пустую директорию или возвращает ошибку, если она не пуста.</p>
</div>
<div class="paragraph">
<p>Вы также можете проверить, существует ли путь, является ли он файлом или директорией:</p>
</div>
<div class="paragraph">
<p>В директории, в которой вы запустите приведённый ниже скрипт, создайте пустую папку <code>folder123</code> и пустой файл <code>script123.p6</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&quot;script123.p6&quot;</span>.<span class="tok-nb">IO</span>.<span class="tok-nb">e</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;folder123&quot;</span>.<span class="tok-nb">IO</span>.<span class="tok-nb">e</span>;

<span class="tok-nb">say</span> <span class="tok-s">&quot;script123.p6&quot;</span>.<span class="tok-nb">IO</span>.<span class="tok-nb">d</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;folder123&quot;</span>.<span class="tok-nb">IO</span>.<span class="tok-nb">d</span>;

<span class="tok-nb">say</span> <span class="tok-s">&quot;script123.p6&quot;</span>.<span class="tok-nb">IO</span>.<span class="tok-nb">f</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;folder123&quot;</span>.<span class="tok-nb">IO</span>.<span class="tok-nb">f</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>IO.e</code> проверяет, существует ли директория/файл.<br>
<code>IO.f</code> проверяет, ведёт ли путь к файлу.<br>
<code>IO.d</code> проверяет, ведёт ли путь к директории.</p>
</div>
<div class="paragraph">
<p>ВНИМАНИЕ: Пользователи Windows могут использовать <code>/</code> или <code>\\</code>, чтобы разделять директории<br>
<code>C:\\rakudo\\bin</code><br>
<code>C:/rakudo/bin</code><br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Больше информации о вводе/выводе можно узнать на <a href="https://docs.raku.org/type/IO" class="bare">https://docs.raku.org/type/IO</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_подпрограммы">7. Подпрограммы</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_определение">7.1. Определение</h3>
<div class="paragraph">
<p><strong>Подпрограммы</strong> (также называемые <strong>функциями</strong>) это средство объединения и повторного использования функциональности.<br></p>
</div>
<div class="paragraph">
<p>Определение подпрограммы начинается с ключевого слова <code>sub</code>. После определения, она может быть вызвана по имени.<br>
Рассмотрите следующий пример:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">alien-greeting</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Hello earthlings&quot;</span>;
}

<span class="tok-n">alien-greeting</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Это пример определения подпрограммы, в которой нет входных данных.</p>
</div>
</div>
<div class="sect2">
<h3 id="_сигнатура">7.2. Сигнатура</h3>
<div class="paragraph">
<p>Подпрограмма может зависеть от входных данных. Эти данные передаются посредством <strong>аргументов</strong>.
Подпрограмма может определять ноль либо больше <strong>параметров</strong>.
Количество и тип параметров, которые определены подпрограммой, называются её <strong>сигнатурой</strong>.</p>
</div>
<div class="paragraph">
<p>Подпрограмма ниже принимает аргументом строку.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">say-hello</span> (<span class="tok-nb">Str</span> <span class="tok-nv">$name</span>) {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Hello &quot;</span> ~ <span class="tok-nv">$name</span> ~ <span class="tok-s">&quot;!!!!&quot;</span>
}
<span class="tok-n">say-hello</span> <span class="tok-s">&quot;Paul&quot;</span>;
<span class="tok-n">say-hello</span> <span class="tok-s">&quot;Paula&quot;</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_множественная_диспетчеризация">7.3. Множественная диспетчеризация</h3>
<div class="paragraph">
<p>Можно определять несколько подпрограмм с одинаковым именем, но разными сигнатурами.
Когда подпрограмма вызывается, окружение времени выполнения определяет, какой вариант использовать, основываясь на количестве и типах переданных аргументов. Такой вид подпрограмм описывается точно так же, как и обычные подпрограммы, но вместо ключевого слова <code>sub</code> используется <code>multi</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">multi</span> <span class="tok-n">greet</span>(<span class="tok-nv">$name</span>) {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Good morning $name&quot;</span>;
}
<span class="tok-k">multi</span> <span class="tok-n">greet</span>(<span class="tok-nv">$name</span>, <span class="tok-nv">$title</span>) {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Good morning $title $name&quot;</span>;
}

<span class="tok-n">greet</span> <span class="tok-s">&quot;Johnnie&quot;</span>;
<span class="tok-n">greet</span> <span class="tok-s">&quot;Laura&quot;</span>,<span class="tok-s">&quot;Mrs.&quot;</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_параметры_по_умолчанию_и_опциональные_параметры">7.4. Параметры по умолчанию и опциональные параметры</h3>
<div class="paragraph">
<p>Если подпрограмма принимает аргумент, но вызвана без этого необходимого аргумента, произойдёт ошибка.</p>
</div>
<div class="paragraph">
<p>Raku предоставляет нам возможность определять подпрограммы с:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Опциональными параметрами</p>
</li>
<li>
<p>Параметрами по умолчанию</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Опциональный параметр можно определить, добавив <code>?</code> к его имени.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">say-hello</span>(<span class="tok-nv">$name</span>?) {
  <span class="tok-k">with</span> <span class="tok-nv">$name</span> { <span class="tok-nb">say</span> <span class="tok-s">&quot;Hello &quot;</span> ~ <span class="tok-nv">$name</span> }
  <span class="tok-k">else</span> { <span class="tok-nb">say</span> <span class="tok-s">&quot;Hello Human&quot;</span> }
}
<span class="tok-n">say-hello</span>;
<span class="tok-n">say-hello</span>(<span class="tok-s">&quot;Laura&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если пользователь может не передавать аргумент, можно определить значение по умолчанию.<br>
Это делается с помощью присвоения значению параметру в определении подпрограммы.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">say-hello</span>(<span class="tok-nv">$name</span>=<span class="tok-s">&quot;Matt&quot;</span>) {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Hello &quot;</span> ~ <span class="tok-nv">$name</span>;
}
<span class="tok-n">say-hello</span>;
<span class="tok-n">say-hello</span>(<span class="tok-s">&quot;Laura&quot;</span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_возврат_значений">7.5. Возврат значений</h3>
<div class="paragraph">
<p>Все подпрограммы, которые мы пока видели, <strong>делали что-то</strong>&#8201;&#8212;&#8201;они выводили некий текст в терминал.</p>
</div>
<div class="paragraph">
<p>Но иногда мы вызываем подпрограмму для её <strong>возвращаемого</strong> значения, которое мы можем позднее использовать в потоке выполнения программы.</p>
</div>
<div class="paragraph">
<p>Если поток выполнения тела функции доходит до конца блока, последняя инструкция или выражение будет использоваться как возвращаемое значение.</p>
</div>
<div class="listingblock">
<div class="title">Неявный возврат</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">squared</span> (<span class="tok-nv">$x</span>) {
  <span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>;
}
<span class="tok-nb">say</span> <span class="tok-s">&quot;7 squared is equal to &quot;</span> ~ <span class="tok-n">squared</span>(<span class="tok-mi">7</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для большей ясности, хорошо <em>явно</em> указывать, что мы возвращаем.
Это можно сделать используя ключевое слово <code>return</code>.</p>
</div>
<div class="listingblock">
<div class="title">Явный возврат</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">squared</span> (<span class="tok-nv">$x</span>) {
  <span class="tok-k">return</span> <span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>;
}
<span class="tok-nb">say</span> <span class="tok-s">&quot;7 squared is equal to &quot;</span> ~ <span class="tok-n">squared</span>(<span class="tok-mi">7</span>);</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_указание_типа_возвращаемого_значения">7.5.1. Указание типа возвращаемого значения</h4>
<div class="paragraph">
<p>В одном из предыдущих примеров мы показали, как мы можем указывать тип определённого аргумента.
Для возвращаемых значений тоже можно указывать тип.</p>
</div>
<div class="paragraph">
<p>Для того, чтобы ограничить возвращаемое значение определённым типом, мы используем либо трейт <code>returns</code> либо стрелочную нотацию <code>--&gt;</code> в сигнатуре.</p>
</div>
<div class="listingblock">
<div class="title">Использование трейта returns</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">squared</span> (<span class="tok-nv">$x</span>) <span class="tok-k">returns</span> <span class="tok-nb">Int</span> {
  <span class="tok-k">return</span> <span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>;
}
<span class="tok-nb">say</span> <span class="tok-s">&quot;1.2 squared is equal to &quot;</span> ~ <span class="tok-n">squared</span>(<span class="tok-mf">1.2</span>);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Использование стрелки</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">squared</span> (<span class="tok-nv">$x</span> --&gt; <span class="tok-nb">Int</span>) {
  <span class="tok-k">return</span> <span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>;
}
<span class="tok-nb">say</span> <span class="tok-s">&quot;1.2 squared is equal to &quot;</span> ~ <span class="tok-n">squared</span>(<span class="tok-mf">1.2</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если мы вернём значение, которое не будет совпадать с указанным типом, будет выброшена ошибка.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Type</span> <span class="tok-n">check</span> <span class="tok-n">failed</span> <span class="tok-k">for</span> <span class="tok-k">return</span> <span class="tok-nb">value</span>; <span class="tok-nb">expected</span> <span class="tok-nb">Int</span> <span class="tok-k">but</span> <span class="tok-nb">got</span> <span class="tok-nb">Rat</span> (<span class="tok-mf">1.44</span>)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ограничения по типу могут контролировать не только тип возвращаемого значения, но и то, определено ли оно.</p>
</div>
<div class="paragraph">
<p>В предыдущих примерах, мы указывали, что тип возвращаемого значения должен быть  <code>Int</code>.</p>
</div>
<div class="paragraph">
<p>Мы также могли указать, что возвращаемый тип <code>Int</code> должен быть строго определённым либо строго неопределённым, используя такие сигнатуры: :<br>
<code>-&#8594; Int:D</code> и <code>-&#8594; Int:U</code></p>
</div>
<div class="paragraph">
<p>С учётом этого, хорошей практикой является использовать такие ограничения типа.<br>
Ниже приведена модифицированная версия предыдущего примера, который использует <code>:D</code> для того, чтобы гарантировать, что возвращаемое значение типа <code>Int</code> будет определено.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">squared</span> (<span class="tok-nv">$x</span> --&gt; <span class="tok-nb">Int:D</span>) {
  <span class="tok-k">return</span> <span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>;
}
<span class="tok-nb">say</span> <span class="tok-s">&quot;1.2 squared is equal to &quot;</span> ~ <span class="tok-n">squared</span>(<span class="tok-mf">1.2</span>);</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Более подробно о подпрограммах и функциях можно узнать на <a href="https://docs.raku.org/language/functions" class="bare">https://docs.raku.org/language/functions</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_функциональное_программирование">8. Функциональное программирование</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе мы взглянем на некоторые из возможностей, которые предоставляет функциональное программирование.</p>
</div>
<div class="sect2">
<h3 id="_функции_это_объекты_первого_класса">8.1. Функции это объекты первого класса</h3>
<div class="paragraph">
<p>Функции/подпрограммы это объекты первого класса:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Они могут быть переданы как аргументы</p>
</li>
<li>
<p>Они могут быть возвращены из других функций</p>
</li>
<li>
<p>Они могут быть присвоены переменным</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Наглядным примером является функция <code>map</code>.<br>
<code>map</code> это <em>функция высшего порядка</em>, она может принимать другую функцию как аргумент.</p>
</div>
<div class="listingblock">
<div class="title">Скрипт</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = <span class="tok-s">&lt;1 2 3 4 5&gt;</span>;
<span class="tok-k">sub</span> <span class="tok-n">squared</span>(<span class="tok-nv">$x</span>) {
  <span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>
}
<span class="tok-nb">say</span> <span class="tok-n">map</span>(<span class="tok-nv">&amp;squared</span>,<span class="tok-nv">@array</span>);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Вывод</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>(<span class="tok-mi">1</span> <span class="tok-mi">4</span> <span class="tok-mi">9</span> <span class="tok-mi">16</span> <span class="tok-mi">25</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p>Мы определили подпрограмму с именем <code>squared</code>, которая принимает аргумент и умножает его на себя.<br>
Далее, мы использовали <code>map</code>, функцию высшего порядка, и передали ей два аргумента: подпрограмма <code>squared</code> и массив.<br>
Результат - список элементов массива, возведённых в квадрат.</p>
</div>
<div class="paragraph">
<p>Отметьте, что при передаче подпрограммы аргументом, мы должны добавлять <code>&amp;</code> в начале её имени.</p>
</div>
</div>
<div class="sect2">
<h3 id="_анонимные_функции">8.2. Анонимные функции</h3>
<div class="paragraph">
<p><strong>Анонимные функции</strong> также называют <strong>лямбдами</strong>.<br>
Анонимная функция не привязана к идентификатору (у неё нет имени).</p>
</div>
<div class="paragraph">
<p>Давайте перепишем пример с <code>map</code>, используя анонимную функцию</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = <span class="tok-s">&lt;1 2 3 4 5&gt;</span>;
<span class="tok-nb">say</span> <span class="tok-n">map</span>(-&gt; <span class="tok-nv">$x</span> {<span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>},<span class="tok-nv">@array</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Отметьте, что вместо объявления подпрограммы для получения квадрата и передачи её аргументом к <code>map</code>, мы определили её внутри анонимной подпрограммы как <code>-&gt; $x {$x ** 2}</code>.</p>
</div>
<div class="paragraph">
<p>В жаргоне Perl 6, мы называем такую нотацию <strong>заостренный блок</strong> (pointy block)</p>
</div>
<div class="listingblock">
<div class="title">Заостренный блок также можно использовать, чтобы присвоить функцию переменной:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$squared</span> = -&gt; <span class="tok-nv">$x</span> {
  <span class="tok-nv">$x</span> ** <span class="tok-mi">2</span>
}
<span class="tok-nb">say</span> <span class="tok-nv">$squared</span>(<span class="tok-mi">9</span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_сцепление">8.3. "Сцепление"</h3>
<div class="paragraph">
<p>В Raku, вызовы методов могут быть "сцеплеными", что избавляет от необходимости передавать результат каждого метода как аргумент следующего.</p>
</div>
<div class="paragraph">
<p>К примеру, для данного массива, необходимо вернуть уникальные значения массива, отсортированные от наибольшего до наименьшего.</p>
</div>
<div class="paragraph">
<p>Вот решение без сцепления:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = <span class="tok-s">&lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;</span>;
<span class="tok-k">my</span> <span class="tok-nv">@final-array</span> = <span class="tok-nb">reverse</span>(<span class="tok-nb">sort</span>(<span class="tok-nb">unique</span>(<span class="tok-nv">@array</span>)));
<span class="tok-nb">say</span> <span class="tok-nv">@final-array</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В этом случае, мы вызываем <code>unique</code> на <code>@array</code>, передаём результат как аргумент в <code>sort</code>, а затем передаём результат в <code>reverse</code>.</p>
</div>
<div class="paragraph">
<p>Напротив, с сцеплением методов, пример выше может быть переписан как:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = <span class="tok-s">&lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;</span>;
<span class="tok-k">my</span> <span class="tok-nv">@final-array</span> = <span class="tok-nv">@array</span>.<span class="tok-nb">unique</span>.<span class="tok-nb">sort</span>.<span class="tok-nb">reverse</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@final-array</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Как можно увидеть, сцепление методов гораздо <em>проще читать</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_оператор_ленты">8.4. Оператор ленты</h3>
<div class="paragraph">
<p><strong>Оператор ленты</strong>, называемый <em>конвейером</em> в некоторых функциональных языках программирования, развивает нотацию сцепления методов.</p>
</div>
<div class="listingblock">
<div class="title">Прямая лента</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = <span class="tok-s">&lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;</span>;
<span class="tok-nv">@array</span> ==&gt; <span class="tok-nb">unique</span>()
       ==&gt; <span class="tok-nb">sort</span>()
       ==&gt; <span class="tok-nb">reverse</span>()
       ==&gt; <span class="tok-k">my</span> <span class="tok-nv">@final-array</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@final-array</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Пояснение</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Начать</span> <span class="tok-n">с</span> `<span class="tok-nv">@array</span>` <span class="tok-n">и</span> <span class="tok-n">вернуть</span> <span class="tok-n">список</span> <span class="tok-n">уникальных</span> <span class="tok-n">элементов</span>
                  <span class="tok-n">и</span> <span class="tok-n">отсортировать</span> <span class="tok-n">его</span>
                  <span class="tok-n">и</span> <span class="tok-n">развернуть</span> <span class="tok-n">его</span>
                  <span class="tok-n">и</span> <span class="tok-n">сохранить</span> <span class="tok-n">результат</span> <span class="tok-n">в</span> <span class="tok-nv">@final-array</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Отметьте, что порядок вызовов методов сверху-вниз&#8201;&#8212;&#8201;от первого до последнего шага.</p>
</div>
<div class="listingblock">
<div class="title">Обратная лента</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = <span class="tok-s">&lt;7 8 9 0 1 2 4 3 5 6 7 8 9&gt;</span>;
<span class="tok-k">my</span> <span class="tok-nv">@final-array-v2</span> &lt;== <span class="tok-nb">reverse</span>()
                   &lt;== <span class="tok-nb">sort</span>()
                   &lt;== <span class="tok-nb">unique</span>()
                   &lt;== <span class="tok-nv">@array</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@final-array-v2</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p>Обратная лента работает как прямая, но в противоположную сторону.<br>
Порядок вызовов методов снизу-вверх&#8201;&#8212;&#8201;от последнего до первого шага.</p>
</div>
</div>
<div class="sect2">
<h3 id="_гипер_оператор">8.5. Гипер оператор</h3>
<div class="paragraph">
<p><strong>Гипер оператор</strong> <code>&gt;&gt;.</code> вызовет метод для каждого из элементов списка и вернёт список результатов.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = <span class="tok-s">&lt;0 1 2 3 4 5 6 7 8 9 10&gt;</span>;
<span class="tok-k">sub</span> <span class="tok-n">is-even</span>(<span class="tok-nv">$var</span>) { <span class="tok-nv">$var</span> %% <span class="tok-mi">2</span> };

<span class="tok-nb">say</span> <span class="tok-nv">@array</span>&gt;&gt;.<span class="tok-nb">is-prime</span>;
<span class="tok-nb">say</span> <span class="tok-nv">@array</span>&gt;&gt;.<span class="tok-nv">&amp;is-even</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Используя гипер оператор мы можем вызывать методы, уже определённые в Raku, например, <code>is-prime</code>, который определяет является ли число простым или нет.<br>
Вдобавок мы можем определять новые подпрограммы и вызывать их, используя этот оператор. В этом случае нам необходимо добавлять <code>&amp;</code> перед именем метода, например, <code>&amp;is-even</code>.</p>
</div>
<div class="paragraph">
<p>Такой подход очень практичен в том смысле, что освобождает от необходимости писать цикл <code>for</code> для обхода каждого значения.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Perl 6 гарантирует, что порядок результатов будет таким же, как и в оригинальном списке.
Однако, <strong>нет гарантии</strong>, что Perl 6 на самом деле вызовет методы в оригинальном порядке или в том же самом потоке. Поэтому, будьте осторожны с методами, у которых есть побочные эффекты, например <code>say</code> или <code>print</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_скрещение">8.6. Скрещение</h3>
<div class="paragraph">
<p><strong>Скрещение</strong> это логическая суперпозиция значений.</p>
</div>
<div class="paragraph">
<p>В примере ниже, <code>1|2|3</code> это скрещение.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span> = <span class="tok-mi">2</span>;
<span class="tok-k">if</span> <span class="tok-nv">$var</span> == <span class="tok-mi">1</span><span class="tok-o">|</span><span class="tok-mi">2</span><span class="tok-o">|</span><span class="tok-mi">3</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;The variable is 1 or 2 or 3&quot;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Использование функций обычно вызывает <strong>автоматический трединг</strong>;
операция производится над каждым элементом скрещения, а все результаты собираются в новое скрещение и возвращаются.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ленивые_списки">8.7. Ленивые Списки</h3>
<div class="paragraph">
<p><strong>Ленивый список</strong> это список, значения которого вычисляются с помощью ленивой стратегии вычисления.<br>
Эта стратегия "замораживает" вычисление выражения до того, когда оно понадобится, и не повторяет вычисления, которые уже были сделаны, сохраняя их в таблице поиска.</p>
</div>
<div class="paragraph">
<p>Преимущества такого подхода:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Увеличение производительности благодаря избеганию ненужных вычислений</p>
</li>
<li>
<p>Возможность создавать потенциально бесконечные структуры данных</p>
</li>
<li>
<p>Возможность определять поток выполнения</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для создания ленивого списка, мы используем инфиксный оператор <code>&#8230;&#8203;</code><br>
Ленивый список имеет <strong>начальные элементы</strong> (один либо больше), <strong>генератор</strong> и <strong>предел</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Простой ленивый список</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$lazylist</span> = (<span class="tok-mi">1</span> ... <span class="tok-mi">10</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$lazylist</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Начальный элемент - 1, а предел - 10. Генератор не был определён, поэтому используется генератор по умолчанию - следующий элемент (+1)<br>
Иными словами, ленивый список может вернуть (если необходимо) следующие элементы: (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</p>
</div>
<div class="listingblock">
<div class="title">Бесконечный ленивый список</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$lazylist</span> = (<span class="tok-mi">1</span> ... <span class="tok-n">Inf</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$lazylist</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Этот список вернёт, если необходимо, любое целое число от 1 до бесконечности, то есть любое целое число.</p>
</div>
<div class="listingblock">
<div class="title">Ленивый список с использованием выведенного генератора</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$lazylist</span> = (<span class="tok-mi">0</span>,<span class="tok-mi">2</span> ... <span class="tok-mi">10</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$lazylist</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Начальные элементы здесь 0 и 2, а предел - 10.
Мы не определили генератор, но используя начальные значения, Raku "выведет", что генератор это (+2)<br>
Такой список вернёт, если необходимо, следующие элементы: (0, 2, 4, 6, 8, 10)</p>
</div>
<div class="listingblock">
<div class="title">Ленивый список с определённым генератором</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$lazylist</span> = (<span class="tok-mi">0</span>, { <span class="tok-nv">$_</span> + <span class="tok-mi">3</span> } ... <span class="tok-mi">12</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$lazylist</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В этом примере, мы явно определили генератор, заключённый в скобки <code>{ }</code><br>
Этот ленивый список может вернуть (если необходимо) следующие элементы: (0, 3, 6, 9, 12)</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>При использовании явного генератора, предел должен быть одним из значений, которые этот генератор может вернуть.<br>
Если мы запустим предыдущий пример с пределом 10 вместо 12, он не остановится.
Генератор <em>перепрыгнет</em> через предел.</p>
</div>
<div class="paragraph">
<p>В качестве альтернативы, мы можем заменить  <code>0 &#8230;&#8203; 10</code> на <code>0 &#8230;&#8203;^ * &gt; 10</code><br>
Такое выражение читается как "От 0 до первого значения больше, чем 10 (исключая его)"</p>
</div>
<div class="listingblock">
<div class="title">Такой генератор не остановится</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$lazylist</span> = (<span class="tok-mi">0</span>, { <span class="tok-nv">$_</span> + <span class="tok-mi">3</span> } ... <span class="tok-mi">10</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$lazylist</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Такой генератор остановится</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$lazylist</span> = (<span class="tok-mi">0</span>, { <span class="tok-nv">$_</span> + <span class="tok-mi">3</span> } ...^ * &gt; <span class="tok-mi">10</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$lazylist</span>;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_замыкания">8.8. Замыкания</h3>
<div class="paragraph">
<p>Все объекты кода в Raku являются замыканиями, что означает, что они могут обращаться к лексическим переменным, находящимся в окружающей их области видимости.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">generate-greeting</span> {
    <span class="tok-k">my</span> <span class="tok-nv">$name</span> = <span class="tok-s">&quot;John Doe&quot;</span>;
    <span class="tok-k">sub</span> <span class="tok-n">greeting</span> {
      <span class="tok-nb">say</span> <span class="tok-s">&quot;Good Morning $name&quot;</span>;
    };
    <span class="tok-k">return</span> <span class="tok-nv">&amp;greeting</span>;
}
<span class="tok-k">my</span> <span class="tok-nv">$generated</span> = <span class="tok-n">generate-greeting</span>;
<span class="tok-nv">$generated</span>();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если вы запустите код выше, он выведет <code>Good Morning John Doe</code> в эмуляторе терминала.<br>
Хотя результат очень простой, этот пример интересен тем, что внутренняя подпрограмма <code>greeting</code> была возвращена из внешней до своего вызова.</p>
</div>
<div class="paragraph">
<p><code>$generated</code> стала <strong>замыканием</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Замыкание</strong> это особый вид объекта, который содержит две вещи:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Подпрограмма</p>
</li>
<li>
<p>Окружение, в котором эта подпрограмма была создана.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Окружение состоит из всех локальных переменных, которые были в области видимости во время создания замыкания.
В этом случае, <code>$generated</code> это замыкание, которое объединяет подпрограмму <code>greeting</code> и строку <code>John Doe</code>, которая существовала, когда замыкание было создано.</p>
</div>
<div class="paragraph">
<p>Давайте взглянем на более интересный пример.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">sub</span> <span class="tok-n">greeting-generator</span>(<span class="tok-nv">$period</span>) {
  <span class="tok-k">return</span> <span class="tok-k">sub</span> (<span class="tok-nv">$name</span>) {
    <span class="tok-k">return</span> <span class="tok-s">&quot;Good $period $name&quot;</span>
  }
}
<span class="tok-k">my</span> <span class="tok-nv">$morning</span> = <span class="tok-n">greeting-generator</span>(<span class="tok-s">&quot;Morning&quot;</span>);
<span class="tok-k">my</span> <span class="tok-nv">$evening</span> = <span class="tok-n">greeting-generator</span>(<span class="tok-s">&quot;Evening&quot;</span>);

<span class="tok-nb">say</span> <span class="tok-nv">$morning</span>(<span class="tok-s">&quot;John&quot;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$evening</span>(<span class="tok-s">&quot;Jane&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>В этом примере, мы определили подпрограмму <code>greeting-generator($period)</code>, которая принимает новую подпрограмму. Подпрограмма, которую она возвращает, принимает единственный аргумент <code>$name</code> и возвращает созданное приветствие.</p>
</div>
<div class="paragraph">
<p>По сути, <code>greeting-generator</code> это фабрика подпрограмм. В этом примере, мы использовали <code>greeting-generator</code>, чтобы создать две подпрограммы, одна из которых выводит <code>Good Morning</code>, а другая - <code>Good Evening</code>.</p>
</div>
<div class="paragraph">
<p><code>$morning</code> и <code>$evening</code> это замыкания. Они разделяют одинаковое тело подпрограммы, но разные окружения.<br>
В окружении <code>$morning</code>, <code>$period</code> это <code>Morning</code>. В окружении <code>$evening</code>, <code>$period</code> это <code>Evening</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_классы_и_объекты">9. Классы и Объекты</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В предыдущем разделе, мы изучили возможности Raku в функциональном программировании.<br>
В этом разделе мы посмотрим на объектно-ориентированное программирование в Raku.</p>
</div>
<div class="sect2">
<h3 id="_введение_2">9.1. Введение</h3>
<div class="paragraph">
<p><em>Объектно-ориентированное</em> программирование это одна из широко используемых сегодня парадигм программирования.<br>
<strong>Объект</strong> - это набор переменных и подпрограмм, объединенный в одну сущность.<br>
Переменные называются <strong>атрибутами</strong>, а подпрограммы - <strong>методами</strong>.<br>
Атрибуты определяют <strong>состояние</strong>, а методы определяют <strong>поведение</strong> объекта.</p>
</div>
<div class="paragraph">
<p><strong>Класс</strong> это шаблон для создания <strong>объектов</strong>.<br></p>
</div>
<div class="paragraph">
<p>Для того, чтобы понять это отношение, рассмотрим следующий пример:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Есть 4 человека в комнате</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>объекты</strong> &#8658; 4 человека</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Эти 4 человека - люди</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>класс</strong> &#8658; человек</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">У них разные имена, возраст, пол и национальность</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>атрибуты</strong> &#8658; имя, возраст, пол, национальность</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>В <em>объектно-ориентированном</em> жаргоне, мы называем объекты <strong>экземплярами</strong> класса.</p>
</div>
<div class="paragraph">
<p>Рассмотрим следующий скрипт:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.sex</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.nationality</span>;
}

<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt; <span class="tok-s">&#39;John&#39;</span>, <span class="tok-n">age</span> =&gt; <span class="tok-mi">23</span>, <span class="tok-n">sex</span> =&gt; <span class="tok-s">&#39;M&#39;</span>, <span class="tok-n">nationality</span> =&gt; <span class="tok-s">&#39;American&#39;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ключевое слово <code>class</code> используется для определения класса.<br>
Ключевое слово <code>has</code> используется для определения атрибутов класса.<br>
Метод <code>.new()</code> вызывает <strong>конструктор</strong>. Он создаёт объект как экземпляр класса, для которого он был вызван.</p>
</div>
<div class="paragraph">
<p>В скрипте выше, новая переменная <code>$john</code> содержит ссылку на новый экземпляр класса "Human", определённую вызовом <code>Human.new()</code>.<br>
Аргументы переданные в метод <code>.new()</code> используются для установки значений атрибутов созданного объекта.</p>
</div>
<div class="paragraph">
<p>Классу можно присвоить <em>лексическую область видимости</em> используя <code>my</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-k">class</span> <span class="tok-n">Human</span> {

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_инкапсуляция">9.2. Инкапсуляция</h3>
<div class="paragraph">
<p>Инкапсуляция это концепция объектно-ориентированного программирования, которая состоит в том, чтобы объединять наборы данных и методов вместе.<br>
Данные (атрибуты) внутри объекта должны быть <strong>приватными</strong>, иными словами, доступными только лишь изнутри этого объекта.<br>
Для того, чтобы обратиться к атрибутам не в теле метода объекта, мы используем методы, называемые <strong>ацессоры</strong>(методы доступа).</p>
</div>
<div class="paragraph">
<p>Два скрипта ниже имеют одинаковый результат.</p>
</div>
<div class="listingblock">
<div class="title">Явный доступ к переменной:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span> = <span class="tok-mi">7</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Инкапсуляция:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span> = <span class="tok-mi">7</span>;
<span class="tok-k">sub</span> <span class="tok-n">sayvar</span> {
  <span class="tok-nv">$var</span>;
}
<span class="tok-nb">say</span> <span class="tok-n">sayvar</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Метод <code>sayvar</code> это метод доступа. Он позволяет нам получать доступ к значению переменной без прямого обращения к ней.</p>
</div>
<div class="paragraph">
<p>Инкапсуляция в Raku упрощается с использованием <strong>твигилов</strong>.<br>
Твигилы это вторичные <em>сигилы</em>. Они находятся между сигилом и именем атрибута.<br>
В классах используются два твигила:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>!</code> используется для явного объявления атрибута как приватного.</p>
</li>
<li>
<p><code>.</code> используется для автоматической генерации методов доступа к атрибуту.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>По умолчанию, все атрибуты приватные, но считается хорошей привычкой всегда использовать твигил <code>!</code>.</p>
</div>
<div class="paragraph">
<p>Таким образом, мы можем переписать класс выше как:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$!name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$!age</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$!sex</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$!nationality</span>;
}

<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt; <span class="tok-s">&#39;John&#39;</span>, <span class="tok-n">age</span> =&gt; <span class="tok-mi">23</span>, <span class="tok-n">sex</span> =&gt; <span class="tok-s">&#39;M&#39;</span>, <span class="tok-n">nationality</span> =&gt; <span class="tok-s">&#39;American&#39;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Добавьте в скрипт следующую инструкцию: <code>say $john.age;</code><br>
Повторный запуск скрипта выведет такую ошибку: <code>Method 'age' not found for invocant of class 'Human'</code>
потому что <code>$!age</code> приватный и может быть использован лишь внутри объекта.
Попытка обратиться к нему снаружи объекта создаст исключение.</p>
</div>
<div class="paragraph">
<p>Теперь замените <code>has $!age</code> на <code>has $.age</code> и проверьте результат инструкции <code>say $john.age;</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_именованные_и_позиционные_параметры">9.3. Именованные и Позиционные параметры</h3>
<div class="paragraph">
<p>В Raku все классы наследуют стандартный конструктор <code>.new()</code>.<br>
Он может быть использован для создания объектов и принимает аргументы.<br>
Стандартный конструктор может принимать только <strong>именованные аргументы</strong>.<br>
Отметьте, что в примере выше аргументы, переданные в <code>.new()</code>, определены по имени:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name =&gt; 'John'</p>
</li>
<li>
<p>age =&gt; 23</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Что, если я не хочу указывать имя атрибута каждый раз, когда создаю объект?<br>
Тогда мне нужно создать ещё один конструктор, который принимает <strong>позиционные аргументы</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.sex</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.nationality</span>;
  <span class="tok-c1"># новый конструктор, который переопределяет конструктор по умолчанию</span>
  <span class="tok-k">method</span> <span class="tok-nb">new</span> (<span class="tok-nv">$name</span>,<span class="tok-nv">$age</span>,<span class="tok-nv">$sex</span>,<span class="tok-nv">$nationality</span>) {
    <span class="tok-nb">self</span>.<span class="tok-nb">bless</span>(:<span class="tok-nv">$name</span>,:<span class="tok-nv">$age</span>,:<span class="tok-nv">$sex</span>,:<span class="tok-nv">$nationality</span>);
  }
}

<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-s">&#39;John&#39;</span>,<span class="tok-mi">23</span>,<span class="tok-s">&#39;M&#39;</span>,<span class="tok-s">&#39;American&#39;</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_методы">9.4. Методы</h3>
<div class="sect3">
<h4 id="_введение_3">9.4.1. Введение</h4>
<div class="paragraph">
<p>Методы это <em>подпрограммы</em> объекта.<br>
Как и подпрограммы, это средство объединения и повторного использования функциональности, они принимают <strong>аргументы</strong>, имеют <strong>сигнатуру</strong> и могут быть определены как <strong>multi</strong>.</p>
</div>
<div class="paragraph">
<p>Методы определяются с помощью ключевого слова <code>method</code>.<br>
Обычно методы выполняют некие действия над атрибутами объекта.
Это реализует концепцию инкапсуляции. Атрибуты объекта могут быть использованы только изнутри объекта, используя методы.
Внешний код может взаимодействовать с методами объекта, но не имеет прямого доступа к его атрибутам.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.sex</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.nationality</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.eligible</span>;
  <span class="tok-k">method</span> <span class="tok-n">assess-eligibility</span> {
      <span class="tok-k">if</span> <span class="tok-nb">self</span>.<span class="tok-n">age</span> &lt; <span class="tok-mi">21</span> {
        <span class="tok-nv">$!eligible</span> = <span class="tok-s">&#39;No&#39;</span>
      } <span class="tok-k">else</span> {
        <span class="tok-nv">$!eligible</span> = <span class="tok-s">&#39;Yes&#39;</span>
      }
  }

}

<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt; <span class="tok-s">&#39;John&#39;</span>, <span class="tok-n">age</span> =&gt; <span class="tok-mi">23</span>, <span class="tok-n">sex</span> =&gt; <span class="tok-s">&#39;M&#39;</span>, <span class="tok-n">nationality</span> =&gt; <span class="tok-s">&#39;American&#39;</span>);
<span class="tok-nv">$john</span>.<span class="tok-n">assess-eligibility</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>.<span class="tok-n">eligible</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Методы, однажды определённые для класса, могут быть вызваны для объекта используя <em>точечную нотацию</em>:<br>
<em>объект</em> <strong>.</strong> <em>метод</em> либо как в предыдущем примере: <code>$john.assess-eligibility</code></p>
</div>
<div class="paragraph">
<p>Внутри определения метода, если нам необходимо обратиться к объекту, для которого вызван этот метод, чтобы вызвать другой метод, мы используем ключевое слово <code>self</code>.<br></p>
</div>
<div class="paragraph">
<p>Внутри определения метода, если нам необходимо обратиться к атрибуту, мы используем сигил <code>!</code>, даже если он был определён через <code>.</code><br>
Смысл этого в том, что всё, что делает твигил <code>.</code>, это объявляет атрибут с <code>!</code> и автоматически создаёт ацессор.</p>
</div>
<div class="paragraph">
<p>В примере выше, <code>if self.age &lt; 21</code> и <code>if $!age &lt; 21</code> будут иметь одинаковый эффект, хотя технически они различаются:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>self.age</code> вызывает метод <code>.age</code> (ацессор)<br>
Может быть иначе записано как <code>$.age</code></p>
</li>
<li>
<p><code>$!age</code> это прямое обращение к переменной</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_приватные_методы">9.4.2. Приватные методы</h4>
<div class="paragraph">
<p>Обычные методы могут быть вызваны для объекта за пределами класса.</p>
</div>
<div class="paragraph">
<p><strong>Приватные методы</strong> - это методы, которые могут быть вызваны лишь в пределах объявления класса.<br></p>
</div>
<div class="paragraph">
<p>Возможным вариантом использования будет метод, который вызывает другой метод для некого действия.
Метод, который взаимодействует с внешним миром, будет публичным, когда тот, к которому обратились, должен оставаться приватным.
Мы не хотим, чтобы пользователи вызывали его напрямую, поэтому объявляем его как приватный.</p>
</div>
<div class="paragraph">
<p>Для объявления приватного метода необходимо использовать твигил <code>!</code> перед его именем.<br>
Приватные методы вызываются с помощью <code>!</code> вместо <code>.</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">method</span> !<span class="tok-n">iamprivate</span> {
  <span class="tok-c1"># код здесь</span>
}

<span class="tok-k">method</span> <span class="tok-n">iampublic</span> {
  <span class="tok-nb">self</span><span class="tok-o">!</span><span class="tok-n">iamprivate</span>;
  <span class="tok-c1"># дополнительные действия</span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_атрибуты_класса">9.5. Атрибуты класса</h3>
<div class="paragraph">
<p><strong>Атрибуты класса</strong> - это атрибуты, которые принадлежат самому классу, а не его объектам.<br>
Они могут быть инициализированы при его объявлении.<br>
Атрибуты класса объявляются с помощью <code>my</code> вместо <code>has</code>.<br>
Они вызываются для самого класса, а не его объектов.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">my</span> <span class="tok-nv">$.counter</span> = <span class="tok-mi">0</span>;
  <span class="tok-k">method</span> <span class="tok-nb">new</span>(<span class="tok-nv">$name</span>) {
    <span class="tok-n">Human</span>.<span class="tok-n">counter</span>++;
    <span class="tok-nb">self</span>.<span class="tok-nb">bless</span>(:<span class="tok-nv">$name</span>);
  }
}
<span class="tok-k">my</span> <span class="tok-nv">$a</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-s">&#39;a&#39;</span>);
<span class="tok-k">my</span> <span class="tok-nv">$b</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-s">&#39;b&#39;</span>);

<span class="tok-nb">say</span> <span class="tok-n">Human</span>.<span class="tok-n">counter</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_типы_доступа">9.6. Типы доступа</h3>
<div class="paragraph">
<p>До этого момента, все примеры, которые мы видели, использовали ацессоры для того, чтобы <strong>получить</strong> информацию из атрибутов объектов.</p>
</div>
<div class="paragraph">
<p>Что, если нам нужно модифицировать значение атрибута?<br>
Нам нужно отметить его доступным для <em>чтения/записи</em>, используя ключевое слова <code>is rw</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span> <span class="tok-k">is</span> <span class="tok-k">rw</span>;
}
<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt; <span class="tok-s">&#39;John&#39;</span>, <span class="tok-n">age</span> =&gt; <span class="tok-mi">21</span>);
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>.<span class="tok-n">age</span>;

<span class="tok-nv">$john</span>.<span class="tok-n">age</span> = <span class="tok-mi">23</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>.<span class="tok-n">age</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>По умолчанию все атрибуты объявлены <em>только для чтения</em>, но вы можете указать это явно, используя <code>is readonly</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_наследование">9.7. Наследование</h3>
<div class="sect3">
<h4 id="_введение_4">9.7.1. Введение</h4>
<div class="paragraph">
<p><strong>Наследование</strong> - это ещё одна концепция объектно-ориентированного программирования.</p>
</div>
<div class="paragraph">
<p>При определении классов, скоро мы можем заметить, что некоторые атрибуты либо методы являются общими для многих классов.<br>
Следует ли нам дублировать код?<br>
НЕТ! Нам следует использовать <strong>наследование</strong>.</p>
</div>
<div class="paragraph">
<p>Предположим, что мы хотим объявить два класса: класс Human для людей и класс Employee для рабочих.<br>
Люди имеют 2 атрибута: имя и возраст.<br>
Рабочие имеют 4 атрибута: имя, возраст, компания и зарплата</p>
</div>
<div class="paragraph">
<p>Предположим, вы собираетесь определить классы так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
}

<span class="tok-k">class</span> <span class="tok-n">Employee</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.company</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.salary</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Код в примере выше хоть и технически правильный, он считается концептуально не самым удачным.</p>
</div>
<div class="paragraph">
<p>Лучшим вариантом написания такого будет:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
}

<span class="tok-k">class</span> <span class="tok-n">Employee</span> <span class="tok-k">is</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.company</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.salary</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ключевое слово <code>is</code> определяет наследование.<br>
В объектно-ориентированном жаргоне мы говорим, что Employee это <strong>потомок</strong> Human, а Human это <strong>родительский</strong> класс Employee.</p>
</div>
<div class="paragraph">
<p>Все классы-потомки наследуют атрибуты и методы родительского класса, поэтому их не нужно определять вновь.</p>
</div>
</div>
<div class="sect3">
<h4 id="_переопределение">9.7.2. Переопределение</h4>
<div class="paragraph">
<p>Классы наследуют все атрибуты и методы их родительских классов.<br>
Однако, существуют случаи, когда мы хотим, чтобы метод потомка работал иначе, чем унаследованный.<br>
Для того, чтобы это осуществить, мы переопределяем метод в классе-потомке.<br>
Это называется <strong>переопределением</strong>.</p>
</div>
<div class="paragraph">
<p>В примере ниже, метод <code>introduce-yourself</code> унаследован классом Employee.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
  <span class="tok-k">method</span> <span class="tok-n">introduce-yourself</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&#39;Hi I am a human being, my name is &#39;</span> ~ <span class="tok-nb">self</span>.<span class="tok-nb">name</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">Employee</span> <span class="tok-k">is</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.company</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.salary</span>;
}

<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt;<span class="tok-s">&#39;John&#39;</span>, <span class="tok-n">age</span> =&gt; <span class="tok-mi">23</span>,);
<span class="tok-k">my</span> <span class="tok-nv">$jane</span> = <span class="tok-n">Employee</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt;<span class="tok-s">&#39;Jane&#39;</span>, <span class="tok-n">age</span> =&gt; <span class="tok-mi">25</span>, <span class="tok-n">company</span> =&gt; <span class="tok-s">&#39;Acme&#39;</span>, <span class="tok-n">salary</span> =&gt; <span class="tok-mi">4000</span>);

<span class="tok-nv">$john</span>.<span class="tok-n">introduce-yourself</span>;
<span class="tok-nv">$jane</span>.<span class="tok-n">introduce-yourself</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Переопределение работает так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.age</span>;
  <span class="tok-k">method</span> <span class="tok-n">introduce-yourself</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&#39;Hi I am a human being, my name is &#39;</span> ~ <span class="tok-nb">self</span>.<span class="tok-nb">name</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">Employee</span> <span class="tok-k">is</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nv">$.company</span>;
  <span class="tok-k">has</span> <span class="tok-nv">$.salary</span>;
  <span class="tok-k">method</span> <span class="tok-n">introduce-yourself</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&#39;Hi I am a employee, my name is &#39;</span> ~ <span class="tok-nb">self</span>.<span class="tok-nb">name</span> ~ <span class="tok-s">&#39; and I work at: &#39;</span> ~ <span class="tok-nb">self</span>.<span class="tok-n">company</span>;
  }

}

<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt;<span class="tok-s">&#39;John&#39;</span>,<span class="tok-n">age</span> =&gt; <span class="tok-mi">23</span>,);
<span class="tok-k">my</span> <span class="tok-nv">$jane</span> = <span class="tok-n">Employee</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt;<span class="tok-s">&#39;Jane&#39;</span>,<span class="tok-n">age</span> =&gt; <span class="tok-mi">25</span>,<span class="tok-n">company</span> =&gt; <span class="tok-s">&#39;Acme&#39;</span>,<span class="tok-n">salary</span> =&gt; <span class="tok-mi">4000</span>);

<span class="tok-nv">$john</span>.<span class="tok-n">introduce-yourself</span>;
<span class="tok-nv">$jane</span>.<span class="tok-n">introduce-yourself</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В зависимости от класса объекта, будет вызван нужный метод.</p>
</div>
</div>
<div class="sect3">
<h4 id="_подметоды">9.7.3. Подметоды</h4>
<div class="paragraph">
<p><strong>Подметоды</strong> - это тип методов, которые не наследуются классами-потомками.<br>
Они доступны только из класса, где они определены.<br>
Они определяются, используя ключевое слово <code>submethod</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_множественное_наследование">9.8. Множественное наследование</h3>
<div class="paragraph">
<p>В Perl 6 доступно множественное наследование. Класс может быть потомком множества других классов.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">bar-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.bar-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.bar-values</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">line-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.line-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.line-values</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">combo-chart</span> <span class="tok-k">is</span> <span class="tok-n">bar-chart</span> <span class="tok-k">is</span> <span class="tok-n">line-chart</span> {
}

<span class="tok-k">my</span> <span class="tok-nv">$actual-sales</span> = <span class="tok-n">bar-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>]);
<span class="tok-k">my</span> <span class="tok-nv">$forecast-sales</span> = <span class="tok-n">line-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);

<span class="tok-k">my</span> <span class="tok-nv">$actual-vs-forecast</span> = <span class="tok-n">combo-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>],
                                         <span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual sales:&quot;</span>;
<span class="tok-nv">$actual-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Forecast sales:&quot;</span>;
<span class="tok-nv">$forecast-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual vs Forecast:&quot;</span>;
<span class="tok-nv">$actual-vs-forecast</span>.<span class="tok-n">plot</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Actual</span> <span class="tok-n">sales:</span>
[<span class="tok-mi">10</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">8</span> <span class="tok-mi">7</span> <span class="tok-mi">10</span>]
<span class="tok-n">Forecast</span> <span class="tok-n">sales:</span>
[<span class="tok-mi">9</span> <span class="tok-mi">8</span> <span class="tok-mi">10</span> <span class="tok-mi">7</span> <span class="tok-mi">6</span> <span class="tok-mi">9</span>]
<span class="tok-n">Actual</span> <span class="tok-n">vs</span> <span class="tok-n">Forecast:</span>
[<span class="tok-mi">10</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">8</span> <span class="tok-mi">7</span> <span class="tok-mi">10</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p>Класс <code>combo-chart</code> должен содержать два ряда, один для значений, отображённых на гистограмме, и другой для прогнозируемых значений, построенных на линии.<br>
Именно поэтому мы определили его как потомка <code>line-chart</code> и <code>bar-chart</code>.<br>
Вы могли заметить, что вызов метода <code>plot</code> у <code>combo-chart</code> не возвращает желаемый результат.
Только один ряд был построен.<br>
Почему так произошло?<br>
<code>combo-chart</code> наследует от <code>line-chart</code> и <code>bar-chart</code>, и у оба эти класса содержат метод с названием <code>plot</code>.
Когда мы вызываем его для <code>combo-chart</code>, Raku попробует разрешить этот конфликт, вызвав один из унаследованных методов.</p>
</div>
<div class="paragraph">
<div class="title">Исправление</div>
<p>Для того, чтобы выполняться корректно, нам следует переопределить метод <code>plot</code> для <code>combo-chart</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">bar-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.bar-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.bar-values</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">line-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.line-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.line-values</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">combo-chart</span> <span class="tok-k">is</span> <span class="tok-n">bar-chart</span> <span class="tok-k">is</span> <span class="tok-n">line-chart</span> {
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.bar-values</span>;
    <span class="tok-nb">say</span> <span class="tok-nv">@.line-values</span>;
  }
}

<span class="tok-k">my</span> <span class="tok-nv">$actual-sales</span> = <span class="tok-n">bar-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>]);
<span class="tok-k">my</span> <span class="tok-nv">$forecast-sales</span> = <span class="tok-n">line-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);

<span class="tok-k">my</span> <span class="tok-nv">$actual-vs-forecast</span> = <span class="tok-n">combo-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>],
                                         <span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual sales:&quot;</span>;
<span class="tok-nv">$actual-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Forecast sales:&quot;</span>;
<span class="tok-nv">$forecast-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual vs Forecast:&quot;</span>;
<span class="tok-nv">$actual-vs-forecast</span>.<span class="tok-n">plot</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Actual</span> <span class="tok-n">sales:</span>
[<span class="tok-mi">10</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">8</span> <span class="tok-mi">7</span> <span class="tok-mi">10</span>]
<span class="tok-n">Forecast</span> <span class="tok-n">sales:</span>
[<span class="tok-mi">9</span> <span class="tok-mi">8</span> <span class="tok-mi">10</span> <span class="tok-mi">7</span> <span class="tok-mi">6</span> <span class="tok-mi">9</span>]
<span class="tok-n">Actual</span> <span class="tok-n">vs</span> <span class="tok-n">Forecast:</span>
[<span class="tok-mi">10</span> <span class="tok-mi">9</span> <span class="tok-mi">11</span> <span class="tok-mi">8</span> <span class="tok-mi">7</span> <span class="tok-mi">10</span>]
[<span class="tok-mi">9</span> <span class="tok-mi">8</span> <span class="tok-mi">10</span> <span class="tok-mi">7</span> <span class="tok-mi">6</span> <span class="tok-mi">9</span>]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_роли">9.9. Роли</h3>
<div class="paragraph">
<p><strong>Роли</strong> похожи на классы в том смысле, что являются наборами атрибутов и методов.</p>
</div>
<div class="paragraph">
<p>Роли объявляются с помощью ключевого слова <code>role</code>. Классы, которые реализовывают роль, делают это с помощью ключевого слова <code>does</code>.</p>
</div>
<div class="listingblock">
<div class="title">Давайте перепишем пример с множественным наследованием, используя роли:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">role</span> <span class="tok-n">bar-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.bar-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.bar-values</span>;
  }
}

<span class="tok-k">role</span> <span class="tok-n">line-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.line-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.line-values</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">combo-chart</span> <span class="tok-k">does</span> <span class="tok-n">bar-chart</span> <span class="tok-k">does</span> <span class="tok-n">line-chart</span> {
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.bar-values</span>;
    <span class="tok-nb">say</span> <span class="tok-nv">@.line-values</span>;
  }
}

<span class="tok-k">my</span> <span class="tok-nv">$actual-sales</span> = <span class="tok-n">bar-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>]);
<span class="tok-k">my</span> <span class="tok-nv">$forecast-sales</span> = <span class="tok-n">line-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);

<span class="tok-k">my</span> <span class="tok-nv">$actual-vs-forecast</span> = <span class="tok-n">combo-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>],
                                         <span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual sales:&quot;</span>;
<span class="tok-nv">$actual-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Forecast sales:&quot;</span>;
<span class="tok-nv">$forecast-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual vs Forecast:&quot;</span>;
<span class="tok-nv">$actual-vs-forecast</span>.<span class="tok-n">plot</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Запустите скрипт выше и вы увидите, что результаты одинаковы.</p>
</div>
<div class="paragraph">
<p>Сейчас вы спрашиваете себя: если роли ведут себя как классы, в чём их польза?<br>
Чтобы ответить на этот вопрос, измените первый скрипт, который показывает множественное наследование,
так, будто мы <em>забыли</em> переопределить метод <code>plot</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">role</span> <span class="tok-n">bar-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.bar-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.bar-values</span>;
  }
}

<span class="tok-k">role</span> <span class="tok-n">line-chart</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">@.line-values</span>;
  <span class="tok-k">method</span> <span class="tok-n">plot</span> {
    <span class="tok-nb">say</span> <span class="tok-nv">@.line-values</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">combo-chart</span> <span class="tok-k">does</span> <span class="tok-n">bar-chart</span> <span class="tok-k">does</span> <span class="tok-n">line-chart</span> {
}

<span class="tok-k">my</span> <span class="tok-nv">$actual-sales</span> = <span class="tok-n">bar-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>]);
<span class="tok-k">my</span> <span class="tok-nv">$forecast-sales</span> = <span class="tok-n">line-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);

<span class="tok-k">my</span> <span class="tok-nv">$actual-vs-forecast</span> = <span class="tok-n">combo-chart</span>.<span class="tok-nb">new</span>(<span class="tok-n">bar-values</span> =&gt; [<span class="tok-mi">10</span>,<span class="tok-mi">9</span>,<span class="tok-mi">11</span>,<span class="tok-mi">8</span>,<span class="tok-mi">7</span>,<span class="tok-mi">10</span>],
                                         <span class="tok-n">line-values</span> =&gt; [<span class="tok-mi">9</span>,<span class="tok-mi">8</span>,<span class="tok-mi">10</span>,<span class="tok-mi">7</span>,<span class="tok-mi">6</span>,<span class="tok-mi">9</span>]);
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual sales:&quot;</span>;
<span class="tok-nv">$actual-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Forecast sales:&quot;</span>;
<span class="tok-nv">$forecast-sales</span>.<span class="tok-n">plot</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Actual vs Forecast:&quot;</span>;
<span class="tok-nv">$actual-vs-forecast</span>.<span class="tok-n">plot</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span>===<span class="tok-n">SORRY</span>!===
<span class="tok-nb">Method</span> <span class="tok-s">&#39;plot&#39;</span> <span class="tok-n">must</span> <span class="tok-n">be</span> <span class="tok-n">resolved</span> <span class="tok-n">by</span> <span class="tok-k">class</span> <span class="tok-n">combo-chart</span> <span class="tok-n">because</span> <span class="tok-n">it</span> <span class="tok-n">exists</span> <span class="tok-nb">in</span> <span class="tok-n">multiple</span> <span class="tok-n">roles</span> (<span class="tok-n">line-chart</span>, <span class="tok-n">bar-chart</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p>Если множество ролей применены к одному и тому же классу, и существует конфликт, во время компиляции произойдёт ошибка.<br>
Это гораздо более безопасный подход по сравнению с множественным наследованием, где конфликты не считаются ошибками и просто разрешаются во время выполнения.</p>
</div>
<div class="paragraph">
<p>Роли предупредят вас, что существует конфликт.</p>
</div>
</div>
<div class="sect2">
<h3 id="_интроспекция_2">9.10. Интроспекция</h3>
<div class="paragraph">
<p><strong>Интроспекция</strong> это процесс получения информации об объекте, такой как его тип, атрибуты или методы.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">class</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Str</span> <span class="tok-nv">$.name</span>;
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">$.age</span>;
  <span class="tok-k">method</span> <span class="tok-n">introduce-yourself</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&#39;Hi I am a human being, my name is &#39;</span> ~ <span class="tok-nb">self</span>.<span class="tok-nb">name</span>;
  }
}

<span class="tok-k">class</span> <span class="tok-n">Employee</span> <span class="tok-k">is</span> <span class="tok-n">Human</span> {
  <span class="tok-k">has</span> <span class="tok-nb">Str</span> <span class="tok-nv">$.company</span>;
  <span class="tok-k">has</span> <span class="tok-nb">Int</span> <span class="tok-nv">$.salary</span>;
  <span class="tok-k">method</span> <span class="tok-n">introduce-yourself</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&#39;Hi I am a employee, my name is &#39;</span> ~ <span class="tok-nb">self</span>.<span class="tok-nb">name</span> ~ <span class="tok-s">&#39; and I work at: &#39;</span> ~ <span class="tok-nb">self</span>.<span class="tok-n">company</span>;
  }
}

<span class="tok-k">my</span> <span class="tok-nv">$john</span> = <span class="tok-n">Human</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt;<span class="tok-s">&#39;John&#39;</span>,<span class="tok-n">age</span> =&gt; <span class="tok-mi">23</span>,);
<span class="tok-k">my</span> <span class="tok-nv">$jane</span> = <span class="tok-n">Employee</span>.<span class="tok-nb">new</span>(<span class="tok-nb">name</span> =&gt;<span class="tok-s">&#39;Jane&#39;</span>,<span class="tok-n">age</span> =&gt; <span class="tok-mi">25</span>,<span class="tok-n">company</span> =&gt; <span class="tok-s">&#39;Acme&#39;</span>,<span class="tok-n">salary</span> =&gt; <span class="tok-mi">4000</span>);

<span class="tok-nb">say</span> <span class="tok-nv">$john</span>.<span class="tok-nb">WHAT</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$jane</span>.<span class="tok-nb">WHAT</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>.^<span class="tok-nb">attributes</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$jane</span>.^<span class="tok-nb">attributes</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$john</span>.^<span class="tok-nb">methods</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$jane</span>.^<span class="tok-nb">methods</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$jane</span>.^<span class="tok-nb">parents</span>;
<span class="tok-k">if</span> <span class="tok-nv">$jane</span> ~~ <span class="tok-n">Human</span> {<span class="tok-nb">say</span> <span class="tok-s">&#39;Jane is a Human&#39;</span>};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Интроспекция упрощается с помощью:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.WHAT</code>&#8201;&#8212;&#8201;возвращает класс, с помощью которого был создан объект</p>
</li>
<li>
<p><code>.^attributes</code>&#8201;&#8212;&#8201;возвращает все атрибуты объекта</p>
</li>
<li>
<p><code>.^methods</code>&#8201;&#8212;&#8201;возвращает все методы, которые могут быть вызваны на объекте</p>
</li>
<li>
<p><code>.^parents</code>&#8201;&#8212;&#8201;возвращает родительские классы объекта</p>
</li>
<li>
<p><code>~~</code> называется оператором умного сравнения.
В данном случае, он вычисляется как <em>True</em>, если объект создан из класса, с которым проводится сравнение, либо любого из его потомков.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Для того, чтобы узнать больше об объектно-ориентированном программировании в Raku, посетите:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.raku.org/language/classtut" class="bare">https://docs.raku.org/language/classtut</a></p>
</li>
<li>
<p><a href="https://docs.raku.org/language/objects" class="bare">https://docs.raku.org/language/objects</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_обработка_исключений">10. Обработка исключений</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ловля_исключений">10.1. Ловля исключений</h3>
<div class="paragraph">
<p><strong>Исключения</strong> это особое поведение, которое происходит во время выполнения, когда что-то идёт не так.<br>
Говорится, что исключения <em>выбрасываются</em>.</p>
</div>
<div class="paragraph">
<p>Рассмотрите скрипт ниже, который выполняется корректно:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Str</span> <span class="tok-nv">$name</span>;
<span class="tok-nv">$name</span> = <span class="tok-s">&quot;Joanna&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Hello &quot;</span> ~ <span class="tok-nv">$name</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;How are you doing today?&quot;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Hello</span> <span class="tok-n">Joanna</span>
<span class="tok-n">How</span> <span class="tok-n">are</span> <span class="tok-n">you</span> <span class="tok-n">doing</span> <span class="tok-nb">today</span>?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь рассмотрите скрипт, который выбрасывает исключение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Str</span> <span class="tok-nv">$name</span>;
<span class="tok-nv">$name</span> = <span class="tok-mi">123</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;Hello &quot;</span> ~ <span class="tok-nv">$name</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;How are you doing today?&quot;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Type</span> <span class="tok-n">check</span> <span class="tok-n">failed</span> <span class="tok-nb">in</span> <span class="tok-n">assignment</span> <span class="tok-nb">to</span> <span class="tok-nv">$name</span>; <span class="tok-nb">expected</span> <span class="tok-nb">Str</span> <span class="tok-k">but</span> <span class="tok-nb">got</span> <span class="tok-nb">Int</span>
   <span class="tok-nb">in</span> <span class="tok-nb">block</span> <span class="tok-s">&lt;unit&gt;</span> <span class="tok-nb">at</span> <span class="tok-n">exceptions</span>.<span class="tok-n">p6:2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Отметьте, что когда происходит ошибка (в данном случае, присвоение числа строковой переменной), программа остановится и следующие строки кода не будут выполнены.</p>
</div>
<div class="paragraph">
<p><strong>Обработка исключений</strong> - это процесс <em>ловли</em> исключений, которые были <em>выброшены</em>, для того, чтобы скрипт продолжал работу.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Str</span> <span class="tok-nv">$name</span>;
<span class="tok-k">try</span> {
  <span class="tok-nv">$name</span> = <span class="tok-mi">123</span>;
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Hello &quot;</span> ~ <span class="tok-nv">$name</span>;
  <span class="tok-k">CATCH</span> {
    <span class="tok-k">default</span> {
      <span class="tok-nb">say</span> <span class="tok-s">&quot;Can you tell us your name again, we couldn&#39;t find it in the register.&quot;</span>;
    }
  }
}
<span class="tok-nb">say</span> <span class="tok-s">&quot;How are you doing today?&quot;</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">Can</span> <span class="tok-n">you</span> <span class="tok-nb">tell</span> <span class="tok-n">us</span> <span class="tok-n">your</span> <span class="tok-nb">name</span> <span class="tok-n">again</span>, <span class="tok-n">we</span> <span class="tok-n">couldn&#39;t</span> <span class="tok-n">find</span> <span class="tok-n">it</span> <span class="tok-nb">in</span> <span class="tok-n">the</span> <span class="tok-n">register</span>.
<span class="tok-n">How</span> <span class="tok-n">are</span> <span class="tok-n">you</span> <span class="tok-n">doing</span> <span class="tok-nb">today</span>?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Исключения обрабатываются используя блок <code>try-catch</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">try</span> {
  <span class="tok-c1"># код располагается здесь</span>
  <span class="tok-c1"># если что-то пойдёт не так, скрипт начнёт выполнение блока CATCH ниже</span>
  <span class="tok-c1"># если выполнение пройдёт нормально, блок CATCH будет проигнорирован</span>
  <span class="tok-k">CATCH</span> {
    <span class="tok-k">default</span> {
      <span class="tok-c1"># код здесь будет выполняться, только если будет выброшено исключение</span>
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Блок <code>CATCH</code> может быть определён также, как блок <code>given</code>.
Это означает, что мы можем <em>ловить</em> и обрабатывать по разному много типов исключений.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">try</span> {
  <span class="tok-c1"># код располагается здесь</span>
  <span class="tok-c1"># если что-то пойдёт не так, скрипт начнёт выполнение блока CATCH ниже</span>
  <span class="tok-c1"># если выполнение пройдёт нормально, блок CATCH будет проигнорирован</span>
  <span class="tok-k">CATCH</span> {
    <span class="tok-k">when</span> <span class="tok-o">X</span>::<span class="tok-n">AdHoc</span>   { <span class="tok-c1"># сделать что-то, если выброшено исключение типа X::AdHoc }</span>
    <span class="tok-k">when</span> <span class="tok-o">X</span>::<span class="tok-n">IO</span>      { <span class="tok-c1"># сделать что-то, если выброшено исключение типа X::IO }</span>
    <span class="tok-k">when</span> <span class="tok-o">X</span>::<span class="tok-n">OS</span>      { <span class="tok-c1"># сделать что-то, если выброшено исключение типа X:OS }</span>
    <span class="tok-k">default</span>         { <span class="tok-c1"># сделать что-то, если выброшенное исключение не принадлежит к одному из типов выше }</span>
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_выброс_исключений">10.2. Выброс исключений</h3>
<div class="paragraph">
<p>В Raku можно выбрасывать исключение явно.<br>
Два типа исключений могут быть выброшены:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ad-hoc исключения</p>
</li>
<li>
<p>типизированные исключения</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">ad-hoc</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$age</span> = <span class="tok-mi">21</span>;
<span class="tok-nb">die</span> <span class="tok-s">&quot;Error !&quot;</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">типизированное</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nb">Int</span> <span class="tok-nv">$age</span> = <span class="tok-mi">21</span>;
<span class="tok-o">X</span>::<span class="tok-n">AdHoc</span>.<span class="tok-nb">new</span>(<span class="tok-nb">payload</span> =&gt; <span class="tok-s">&#39;Error !&#39;</span>).<span class="tok-nb">throw</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ad-hoc исключения создаются, используя подпрограмму <code>die</code>, которая принимает сообщение исключения.</p>
</div>
<div class="paragraph">
<p>Типизированные исключения это объекты, поэтому было необходимо использовать конструктор <code>.new()</code> в примере выше.<br>
Все типизированные исключения являются потомками класса <code>X</code> , вот несколько примеров:<br>
<code>X::AdHoc</code> это простейший тип исключения<br>
<code>X::IO</code> относится к ошибкам ввода-вывода<br>
<code>X::OS</code> относится к ошибкам ОС<br>
<code>X::Str::Numeric</code> относится к попытке привести строку к числу</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Для полного списка типов исключений и их методов, смотрите <a href="https://docs.raku.org/type-exceptions.html" class="bare">https://docs.raku.org/type-exceptions.html</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_регулярные_выражения">11. Регулярные выражения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Регулярное выражение (англ. regular expressions, жарг. регэкспы или регексы) - это последовательность символов, которые используются для сравнения с образцом.<br>
Регулярные выражения можно воспринимать как шаблон.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;enlightenment&#39;</span> ~~ <span class="tok-sr">m/ light /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;enlightenment contains the word light&quot;</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В примере выше, оператор умного сравнения <code>~~</code> используется, чтобы проверить, содержит ли строка (enlightenment) слово (light).<br>
"Enlightenment" сравнивается с регулярным выражением <code>m/ light /</code></p>
</div>
<div class="sect2">
<h3 id="_определение_регулярного_выражения">11.1. Определение регулярного выражения</h3>
<div class="paragraph">
<p>Регулярное выражение можно определять так:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/light/</code></p>
</li>
<li>
<p><code>m/light/</code></p>
</li>
<li>
<p><code>rx/light/</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если не указано явно, символы пробела игнорируются; <code>m/light/</code> и <code>m/ light /</code> означают одно и то же.</p>
</div>
</div>
<div class="sect2">
<h3 id="_символы_сравнения_с_образцом">11.2. Символы сравнения с образцом</h3>
<div class="paragraph">
<p>Алфавитные символы и цифры, а также нижнее подчёркивание <code>_</code> означают сами себя.<br>
Все остальные символы должны быть экранированы, используя обратную косую черту или взяты в кавычки.</p>
</div>
<div class="listingblock">
<div class="title">Обратная косая черта</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;Temperature: 13&#39;</span> ~~ <span class="tok-sr">m/ \: /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;The string provided contains a colon :&quot;</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Одинарные кавычки</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;Age = 13&#39;</span> ~~ <span class="tok-sr">m/ &#39;=&#39; /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;The string provided contains an equal character = &quot;</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Двойные кавычки</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;name@company.com&#39;</span> ~~ <span class="tok-sr">m/ &quot;@&quot; /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;This is a valid email address because it contains an @ character&quot;</span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_сравнение_с_категорией_символов">11.3. Сравнение с категорией символов</h3>
<div class="paragraph">
<p>Символы могут быть классифицированы по категориям и мы можем сравнивать с ними.<br>
Мы также можем сравнивать с инверсией этой категории (всё, кроме неё):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Категория</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Регэксп</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Инверсия</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Регэксп</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Символ слова (буква, цифра либо нижнее подчёркивание)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\w</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Любой символ кроме символа слова</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\W</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Цифра</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Любой символ кроме цифры</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\D</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Пробел</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Любой символ кроме пробела</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\S</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Горизонтальный пробел</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\h</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Любой символ кроме горизонтального пробела</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\H</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Вертикальный пробел</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\v</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Любой символ кроме вертикального пробела</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Символ табуляции</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\t</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Любой символ кроме символа табуляции</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\T</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Перевод строки</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Любой символ кроме перевода строки</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\N</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&quot;John123&quot;</span> ~~<span class="tok-sr"> / \d /</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;This is not a valid name, numbers are not allowed&quot;</span>;
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;This is a valid name&quot;</span>
}
<span class="tok-k">if</span> <span class="tok-s">&quot;John-Doe&quot;</span> ~~<span class="tok-sr"> / \s /</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;This string contains whitespace&quot;</span>;
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;This string doesn&#39;t contain whitespace&quot;</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_свойства_юникода">11.4. Свойства Юникода</h3>
<div class="paragraph">
<p>Сравнение с категорией символов, как мы видели в предыдущем разделе, очень удобно.<br>
При этом, более систематическим подходом будет использовать свойства (property) Юникода.<br>
Это позволяет нам сравнивать с категорией символов, которые входят и не входят в стандарт ASCII.<br>
Свойства Юникода заключаются в <code>&lt;: &gt;</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&quot;Devanagari Numbers १२३&quot;</span> ~~<span class="tok-sr"> / &lt;:N&gt; /</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Contains a number&quot;</span>;
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Doesn&#39;t contain a number&quot;</span>
}
<span class="tok-k">if</span> <span class="tok-s">&quot;Привет, Иван.&quot;</span> ~~<span class="tok-sr"> / &lt;:Lu&gt; /</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Contains an uppercase letter&quot;</span>;
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Doesn&#39;t contain an upper case letter&quot;</span>
}
<span class="tok-k">if</span> <span class="tok-s">&quot;John-Doe&quot;</span> ~~<span class="tok-sr"> / &lt;:Pd&gt; /</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Contains a dash&quot;</span>;
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;Doesn&#39;t contain a dash&quot;</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_символ_подстановки">11.5. Символ подстановки</h3>
<div class="paragraph">
<p>Также в регулярных выражениях можно использовать "символ подстановки" или "wildcard".</p>
</div>
<div class="paragraph">
<p>Точка <code>.</code> означает один любой символ.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;abc&#39;</span> ~~ <span class="tok-sr">m/ a.c /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;a2c&#39;</span> ~~ <span class="tok-sr">m/ a.c /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;ac&#39;</span> ~~ <span class="tok-sr">m/ a.c /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_кванторы">11.6. Кванторы</h3>
<div class="paragraph">
<p>Кванторы записываются после символа и используются для того, чтобы уточнить, как много раз мы ожидаем его встретить.</p>
</div>
<div class="paragraph">
<p>Знак вопроса <code>?</code> означает ноль или один раз.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;ac&#39;</span> ~~ <span class="tok-sr">m/ a?c /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;c&#39;</span> ~~ <span class="tok-sr">m/ a?c /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Астериск (звёздочка) <code>*</code> означает ноль или больше раз.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;az&#39;</span> ~~ <span class="tok-sr">m/ a*z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;aaz&#39;</span> ~~ <span class="tok-sr">m/ a*z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;aaaaaaaaaaz&#39;</span> ~~ <span class="tok-sr">m/ a*z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;z&#39;</span> ~~ <span class="tok-sr">m/ a*z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>+</code> означает как минимум один раз.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;az&#39;</span> ~~ <span class="tok-sr">m/ a+z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;aaz&#39;</span> ~~ <span class="tok-sr">m/ a+z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;aaaaaaaaaaz&#39;</span> ~~ <span class="tok-sr">m/ a+z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}
<span class="tok-k">if</span> <span class="tok-s">&#39;z&#39;</span> ~~ <span class="tok-sr">m/ a+z /</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;Match&quot;</span>;
} <span class="tok-k">else</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;No Match&quot;</span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_результат_сравнения">11.7. Результат сравнения</h3>
<div class="paragraph">
<p>Когда процесс сравнения строки с регулярным выражением успешен,
его результат хранится в специальной переменной <code>$/</code></p>
</div>
<div class="listingblock">
<div class="title">Скрипт</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">if</span> <span class="tok-s">&#39;Rakudo is a Raku compiler&#39;</span> ~~ <span class="tok-sr">m/:s Raku/</span> {
    <span class="tok-nb">say</span> <span class="tok-s">&quot;The match is: &quot;</span> ~ <span class="tok-vg">$/</span>;
    <span class="tok-nb">say</span> <span class="tok-s">&quot;The string before the match is: &quot;</span> ~ <span class="tok-vg">$/</span>.<span class="tok-nb">prematch</span>;
    <span class="tok-nb">say</span> <span class="tok-s">&quot;The string after the match is: &quot;</span> ~ <span class="tok-vg">$/</span>.<span class="tok-nb">postmatch</span>;
    <span class="tok-nb">say</span> <span class="tok-s">&quot;The matching string starts at position: &quot;</span> ~ <span class="tok-vg">$/</span>.<span class="tok-nb">from</span>;
    <span class="tok-nb">say</span> <span class="tok-s">&quot;The matching string ends at position: &quot;</span> ~ <span class="tok-vg">$/</span>.<span class="tok-nb">to</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Вывод</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">The</span> <span class="tok-nb">match</span> <span class="tok-n">is:</span> <span class="tok-n">Raku</span>
<span class="tok-n">The</span> <span class="tok-n">string</span> <span class="tok-o">before</span> <span class="tok-n">the</span> <span class="tok-nb">match</span> <span class="tok-n">is:</span> <span class="tok-n">Rakudo</span> <span class="tok-k">is</span> <span class="tok-n">a</span>
<span class="tok-n">The</span> <span class="tok-n">string</span> <span class="tok-nb">after</span> <span class="tok-n">the</span> <span class="tok-nb">match</span> <span class="tok-n">is:</span> <span class="tok-nb">compiler</span>
<span class="tok-n">The</span> <span class="tok-n">matching</span> <span class="tok-n">string</span> <span class="tok-n">starts</span> <span class="tok-nb">at</span> <span class="tok-n">position:</span> <span class="tok-mi">12</span>
<span class="tok-n">The</span> <span class="tok-n">matching</span> <span class="tok-n">string</span> <span class="tok-n">ends</span> <span class="tok-nb">at</span> <span class="tok-n">position:</span> <span class="tok-mi">18</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p><code>$/</code> возвращает объект <code>Match</code> (строку, которая отвечает регулярному выражению)<br>
Вот часть методов, определённых для объекта <em>Match</em>:<br>
<code>.prematch</code> возвращает строку, предшествующую совпадению.<br>
<code>.postmatch</code> возвращает строку, идущую после совпадения.<br>
<code>.from</code> возвращает начальную позицию совпадения.<br>
<code>.to</code> возвращает конечную позицию совпадения.<br></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
По умолчанию, пробелы в регулярных выражениях игнорируются.<br>
Если мы хотим сравнивать с регулярным выражением, явно содержащим символы пробела, мы должны делать это явно.<br>
Использование <code>:s</code> в регулярном выражении <code>m/:s Raku/</code> позволяет учитывать символы пробела.<br>
Другой вариант - мы могли написать регулярное выражение как <code>m/ Raku\s6 /</code> и использовать <code>\s</code>, который означает пробел.<br>
Если регулярное выражение содержит больше одного пробела, использование <code>:s</code> более предпочтительно, чем запись <code>\s</code> для каждого пробела.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_пример">11.8. Пример</h3>
<div class="paragraph">
<p>Давайте проверим, корректный ли электронный адрес или нет.<br>
Для простоты примера мы предположим, что корректный электронный адрес имеет формат:<br>
имя [dot] фамилия [at] компания [dot] (com/org/net)</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Регулярное выражение, использованное в этом примере для проверки электронного адреса, не очень точное.<br>
Его единственное применение это продемонстрировать регулярные выражения в Raku.<br>
Не используйте его без изменений в настоящих программах.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Скрипт</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$email</span> = <span class="tok-s">&#39;john.doe@perl6.org&#39;</span>;
<span class="tok-k">my</span> <span class="tok-nv">$regex</span> =<span class="tok-sr"> / &lt;:L&gt;+\.&lt;:L&gt;+\@&lt;:L+:N&gt;+\.&lt;:L&gt;+ /</span>;

<span class="tok-k">if</span> <span class="tok-nv">$email</span> ~~ <span class="tok-nv">$regex</span> {
  <span class="tok-nb">say</span> <span class="tok-vg">$/</span> ~ <span class="tok-s">&quot; is a valid email&quot;</span>;
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;This is not a valid email&quot;</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Вывод</div>
<p><code>john.doe@perl6.org is a valid email</code></p>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p><code>&lt;:L&gt;</code> совпадает с одной буквой<br>
<code>&lt;:L&gt;` совпадает с одной или больше буквами +
`\.` совпадает с одним символом [dot] +
`\@` совпадает с одним символом [at] +
`&lt;:L:N&gt;</code> совпадает с буквой или цифрой<br>
<code>&lt;:L+:N&gt;+</code> совпадает с одной или более буквой либо цифрой<br></p>
</div>
<div class="paragraph">
<p>Это регулярное выражение можно разделить на части так:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>имя</strong> <code>&lt;:L&gt;+</code></p>
</li>
<li>
<p><strong>[dot]</strong> <code>\.</code></p>
</li>
<li>
<p><strong>фамилия</strong> <code>&lt;:L&gt;+</code></p>
</li>
<li>
<p><strong>[at]</strong> <code>\@</code></p>
</li>
<li>
<p><strong>компания</strong> <code>&lt;:L+:N&gt;+</code></p>
</li>
<li>
<p><strong>[dot]</strong> <code>\.</code></p>
</li>
<li>
<p><strong>com/org/net</strong> <code>&lt;:L&gt;+</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Как вариант, регулярное выражение может быть разбито на множество именованных регулярных выражений</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$email</span> = <span class="tok-s">&#39;john.doe@perl6.org&#39;</span>;
<span class="tok-k">my</span> <span class="tok-k">regex</span><span class="tok-n"> many-letters</span> {<span class="tok-sr"> &lt;:L&gt;+ </span>};
<span class="tok-k">my</span> <span class="tok-k">regex</span><span class="tok-n"> dot</span> {<span class="tok-sr"> \. </span>};
<span class="tok-k">my</span> <span class="tok-k">regex</span><span class="tok-n"> at</span> {<span class="tok-sr"> \@ </span>};
<span class="tok-k">my</span> <span class="tok-k">regex</span><span class="tok-n"> many-letters-numbers</span> {<span class="tok-sr"> &lt;:L+:N&gt;+ </span>};

<span class="tok-k">if</span> <span class="tok-nv">$email</span> ~~<span class="tok-sr"> / &lt;many-letters&gt; &lt;dot&gt; &lt;many-letters&gt; &lt;at&gt; &lt;many-letters-numbers&gt; &lt;dot&gt; &lt;many-letters&gt; /</span> {
  <span class="tok-nb">say</span> <span class="tok-vg">$/</span> ~ <span class="tok-s">&quot; is a valid email&quot;</span>;
} <span class="tok-k">else</span> {
  <span class="tok-nb">say</span> <span class="tok-s">&quot;This is not a valid email&quot;</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Именованный регэксп определяется, используя следующий синтаксис: <code>my regex regex-name { regex definition }</code><br>
Именованный регэксп может быть использован, используя следующий синтаксис: <code>&lt;regex-name&gt;</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Больше о регэкспах в Raku можно узнать на <a href="https://docs.raku.org/language/regexes" class="bare">https://docs.raku.org/language/regexes</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_модули_raku">12. Модули Raku</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Raku это язык программирования общего назначения. Его можно использовать для решения различных задач:
работы с текстом, графикой, вебом, базами данных, сетевыми протоколами и так далее.</p>
</div>
<div class="paragraph">
<p>Возможность повторного использования это очень важная концепция, гласящая, что программисты не должны "изобретать колесо" каждый раз, когда им нужно решить новую задачу.</p>
</div>
<div class="paragraph">
<p>Perl 6 позволяет создавать и распространять <strong>модули</strong>. Каждый модуль это отдельная единица функциональности, которая может быть использована повторно после установки.</p>
</div>
<div class="paragraph">
<p><em>Zef</em> - это средство для управления модулями, которое поставляется вместе с Rakudo Star.</p>
</div>
<div class="paragraph">
<p>Чтобы установить конкретный модуль, выполните команду ниже в эмуляторе терминала:</p>
</div>
<div class="paragraph">
<p><code>zef install "имя модуля"</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Список модулей Raku можно найти на <a href="https://modules.raku.org/" class="bare">https://modules.raku.org/</a>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_использование_модулей">12.1. Использование модулей</h3>
<div class="paragraph">
<p>MD5 это криптографическая хеш-функция, результатом которой является 128-битное значение хеша.<br>
У MD5 есть множество применений в приложениях, включая шифрование паролей, хранящихся в базе данных.
Когда новый пользователь регистрируется, его данные хранятся не в чистом виде, а в <em>хешированом</em>.
Идея заключается в том, что если база данных будет скомпрометирована, атакующий не сможет узнать пароли.</p>
</div>
<div class="paragraph">
<p>К счастью, нам не нужно реализовывать алгоритм MD5 вручную; существует модуль, написанный на Raku, где это реализовано.</p>
</div>
<div class="paragraph">
<p>Давайте установим его:<br>
<code>zef install Digest::MD5</code></p>
</div>
<div class="paragraph">
<p>Теперь, запустите скрипт ниже:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">use</span> <span class="tok-n">Digest::MD5</span>;
<span class="tok-k">my</span> <span class="tok-nv">$password</span> = <span class="tok-s">&quot;password123&quot;</span>;
<span class="tok-k">my</span> <span class="tok-nv">$hashed-password</span> = <span class="tok-n">Digest::MD5</span>.<span class="tok-nb">new</span>.<span class="tok-n">md5_hex</span>(<span class="tok-nv">$password</span>);

<span class="tok-nb">say</span> <span class="tok-nv">$hashed-password</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для того, чтобы вызвать функцию <code>md5_hex()</code>, которая создаёт хеши, нам нужно загрузить соответствующий модуль.<br>
Ключевое слово <code>use</code> загружает модуль, чтобы его можно было использовать в скрипте.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
На практике, само по себе MD5 хеширование не является достаточным, потому что легко уязвимо к атакам по словарю.<br>
Его следует комбинировать с солью <a href="https://ru.wikipedia.org/wiki/Соль_(криптография)">https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D0%BB%D1%8C_(%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%8F)</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_юникод">13. Юникод</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Юникод это стандарт для кодирования и представления текста для большинства систем письменности в мире.<br>
UTF-8 это символьная кодировка, с помощью которой можно кодировать все возможные символы (или "коды символов") в Юникоде.</p>
</div>
<div class="paragraph">
<p>Символы в нём определяются через:<br>
<strong>Графема</strong>: Визуальное отображение.<br>
<strong>Код символа</strong>: Число, присвоенное символу.<br>
<strong>Имя кода символа</strong>: Имя присвоенное символу.</p>
</div>
<div class="sect2">
<h3 id="_использование_юникода">13.1. Использование Юникода</h3>
<div class="listingblock">
<div class="title">Рассмотрим, как мы можем выводить символы, используя Юникод</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&quot;a&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;\x0061&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;\c[LATIN SMALL LETTER A]&quot;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Три строчки выше являются примером разных способов построения символа:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Написание символа напрямую (графемы)</p>
</li>
<li>
<p>Использование <code>\x</code> и кода символа</p>
</li>
<li>
<p>Использование <code>\c</code> и имени кода символа</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Теперь давайте выведем смайлик</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&quot;☺&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;\x263a&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;\c[WHITE SMILING FACE]&quot;</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Пример соединения двух кодов символов</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&quot;á&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;\x00e1&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;\x0061\x0301&quot;</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;\c[LATIN SMALL LETTER A WITH ACUTE]&quot;</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Буква <code>á</code> может быть написана:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>используя её уникальный код символа <code>\x00e1</code></p>
</li>
<li>
<p>либо как комбинация кодов символов <code>a</code> и острого ударения <code>\x0061\x0301</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Несколько методов, которые можно вызывать:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&quot;á&quot;</span>.<span class="tok-nb">NFC</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;á&quot;</span>.<span class="tok-nb">NFD</span>;
<span class="tok-nb">say</span> <span class="tok-s">&quot;á&quot;</span>.<span class="tok-nb">uniname</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>Вывод</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">NFC:0x</span><span class="tok-s">&lt;00e1&gt;</span>
<span class="tok-n">NFD:0x</span><span class="tok-s">&lt;0061 0301&gt;</span>
<span class="tok-n">LATIN</span> <span class="tok-n">SMALL</span> <span class="tok-n">LETTER</span> <span class="tok-n">A</span> <span class="tok-n">WITH</span> <span class="tok-n">ACUTE</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>NFC</code> возвращает уникальный код символа.<br>
<code>NFD</code> декомпозирует символ и возвращает коды символов всех частей.<br>
<code>uniname</code> возвращает имя кода символа.</p>
</div>
<div class="listingblock">
<div class="title">Буквы юникода могут быть использованы в качестве идентификаторов:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$Δ</span> = <span class="tok-mi">1</span>;
<span class="tok-nv">$Δ</span>++;
<span class="tok-nb">say</span> <span class="tok-nv">$Δ</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">С помощью Юникода можно считать:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">$var</span> = <span class="tok-mi">2</span> + <span class="tok-n">⅒</span>;
<span class="tok-nb">say</span> <span class="tok-nv">$var</span>;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_операции_которые_учитывают_юникод">13.2. Операции, которые учитывают Юникод</h3>
<div class="sect3">
<h4 id="_числа">13.2.1. Числа</h4>
<div class="paragraph">
<p>Арабские числа состоят из десяти цифр: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9.
Такой числовой набор самый распространённый в мире.</p>
</div>
<div class="paragraph">
<p>Невзирая на это, разные цифры используются в разных частях мира, хотя и с меньшей распространённостью.</p>
</div>
<div class="paragraph">
<p>Для того, чтобы использовать системы числительных кроме арабских, никаких дополнительных действий не требуется.
Все методы и операторы работают как предполагается.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> (<span class="tok-mi">٤</span>,<span class="tok-mi">٥</span>,<span class="tok-mi">٦</span>,<span class="tok-mi">1</span>,<span class="tok-mi">2</span>,<span class="tok-mi">3</span>).<span class="tok-nb">sort</span>; <span class="tok-c1"># (1 2 3 4 5 6)</span>
<span class="tok-nb">say</span> <span class="tok-mi">1</span> + <span class="tok-mi">٩</span>;              <span class="tok-c1"># 10</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_строки">13.2.2. Строки</h4>
<div class="paragraph">
<p>При использовании обычных операций над строками, мы можем получить не всегда ожидаемый результат,
особенно при сравнении и сортировке.</p>
</div>
<div class="sect4">
<h5 id="_сравнения">Сравнения</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&#39;a&#39;</span> <span class="tok-o">cmp</span> <span class="tok-s">&#39;B&#39;</span>; <span class="tok-c1"># More</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Сравнение выше показывает, что <code>a</code> больше, чем <code>B</code>. Причина в том, что код символа прописной <code>a</code> больше, чем код символа заглавной <code>B</code>.</p>
</div>
<div class="paragraph">
<p>Хотя это технически корректно, такое поведение не всегда желательно.</p>
</div>
<div class="paragraph">
<p>К счастью, в Raku есть методы и операции, которые реализуют <a href="http://unicode.org/reports/tr10/">Unicode Collation Algorithm</a>.<br>
Один из них это <code>unicmp</code>, который повторяет показанный выше <code>cmp</code>, но с учётом Юникода.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> <span class="tok-s">&#39;a&#39;</span> <span class="tok-o">unicmp</span> <span class="tok-s">&#39;B&#39;</span>; <span class="tok-c1"># Less</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Как вы видите, используя оператор <code>unicmp</code> мы получаем ожидаемый результат, в котором <code>a</code> меньше, чем <code>B</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_сортировка">Сортировка</h5>
<div class="paragraph">
<p>Как альтернатива методу <code>sort</code>, который сортирует на основе кодов символов, в Raku есть метод <code>collate</code>,
который реализует <a href="http://unicode.org/reports/tr10/">Unicode Collation Algorithm</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-nb">say</span> (<span class="tok-s">&#39;a&#39;</span>,<span class="tok-s">&#39;b&#39;</span>,<span class="tok-s">&#39;c&#39;</span>,<span class="tok-s">&#39;D&#39;</span>,<span class="tok-s">&#39;E&#39;</span>,<span class="tok-s">&#39;F&#39;</span>).<span class="tok-nb">sort</span>;    <span class="tok-c1"># (D E F a b c)</span>
<span class="tok-nb">say</span> (<span class="tok-s">&#39;a&#39;</span>,<span class="tok-s">&#39;b&#39;</span>,<span class="tok-s">&#39;c&#39;</span>,<span class="tok-s">&#39;D&#39;</span>,<span class="tok-s">&#39;E&#39;</span>,<span class="tok-s">&#39;F&#39;</span>).<span class="tok-nb">collate</span>; <span class="tok-c1"># (a b c D E F)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_параллелизм_одновременность_и_асинхронность">14. Параллелизм, одновременность и асинхронность</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_параллелизм">14.1. Параллелизм</h3>
<div class="paragraph">
<p>Обычно, все задачи в программе выполняются последовательно.<br>
Чаще всего это не является проблемой, если то, что вы пытаетесь сделать, не занимает много времени.</p>
</div>
<div class="paragraph">
<p>К счастью, в Raku есть возможности, которые позволяют вам выполнять процессы параллельно.<br>
На этом этапе важно отметить, что параллелизм может означать одно из двух понятий:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Параллелизм задач</strong>: Два (или больше) независимых выражения вычисляются параллельно.</p>
</li>
<li>
<p><strong>Параллелизм данных</strong>: Единственное выражение обходит список элементов параллельно.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Давайте начнём со второго.</p>
</div>
<div class="sect3">
<h4 id="_параллелизм_данных">14.1.1. Параллелизм данных</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = (<span class="tok-mi">0</span><span class="tok-o">..</span><span class="tok-mi">50000</span>);                     <span class="tok-c1"># Наполнение массива</span>
<span class="tok-k">my</span> <span class="tok-nv">@result</span> = <span class="tok-nv">@array</span>.<span class="tok-n">map</span>({ <span class="tok-nb">is-prime</span> <span class="tok-nv">$_</span> });   <span class="tok-c1"># вызов is-prime для каждого элемента массива</span>
<span class="tok-nb">say</span> <span class="tok-nb">now</span> - <span class="tok-k">INIT</span> <span class="tok-nb">now</span>;                         <span class="tok-c1"># Вывод времени, затраченного на выполнение скрипта</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Рассматривая пример выше:</div>
<p>Мы делаем только одну операцию <code>@array.map({ is-prime $_ })</code><br>
Подпрограмма <code>is-prime</code> вызывается для каждого элемента массива последовательно:<br>
<code>is-prime @array[0]</code>, потом <code>is-prime @array[1]</code>, потом <code>is-prime @array[2]</code> и так далее.</p>
</div>
<div class="listingblock">
<div class="title">К счастью, мы можем вызвать <code>is-prime</code> на нескольких элементах массива одновременно:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = (<span class="tok-mi">0</span><span class="tok-o">..</span><span class="tok-mi">50000</span>);                         <span class="tok-c1"># Наполнение массива</span>
<span class="tok-k">my</span> <span class="tok-nv">@result</span> = <span class="tok-nv">@array</span>.<span class="tok-nb">race</span>.<span class="tok-n">map</span>({ <span class="tok-nb">is-prime</span> <span class="tok-nv">$_</span> });  <span class="tok-c1"># вызов is-prime для каждого элемента массива</span>
<span class="tok-nb">say</span> <span class="tok-nb">now</span> - <span class="tok-k">INIT</span> <span class="tok-nb">now</span>;                             <span class="tok-c1"># Вывод времени, затраченного на выполнение скрипта</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Отметьте использование <code>race</code> в выражении.
Этот метод включает параллельный обход элементов массива.</p>
</div>
<div class="paragraph">
<p>После запуска каждого примера (с и без <code>race</code>), сравните время, которое потребовалось для выполнения каждого скрипта.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>race</code> не сохраняет порядок элементов. Если это необходимо, вместо него используйте <code>hyper</code>.</p>
</div>
<div class="listingblock">
<div class="title">race</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = (<span class="tok-mi">1</span><span class="tok-o">..</span><span class="tok-mi">1000</span>);
<span class="tok-k">my</span> <span class="tok-nv">@result</span> = <span class="tok-nv">@array</span>.<span class="tok-nb">race</span>.<span class="tok-n">map</span>( {<span class="tok-nv">$_</span> + <span class="tok-mi">1</span>} );
.<span class="tok-nb">say</span> <span class="tok-k">for</span> <span class="tok-nv">@result</span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">hyper</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array</span> = (<span class="tok-mi">1</span><span class="tok-o">..</span><span class="tok-mi">1000</span>);
<span class="tok-k">my</span> <span class="tok-nv">@result</span> = <span class="tok-nv">@array</span>.<span class="tok-nb">hyper</span>.<span class="tok-n">map</span>( {<span class="tok-nv">$_</span> + <span class="tok-mi">1</span>} );
.<span class="tok-nb">say</span> <span class="tok-k">for</span> <span class="tok-nv">@result</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если вы запустите оба примера, то можете увидеть, что один из них отсортирован, а другой - нет.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_параллелизм_задач">14.1.2. Параллелизм задач</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array1</span> = (<span class="tok-mi">0</span><span class="tok-o">..</span><span class="tok-mi">49999</span>);
<span class="tok-k">my</span> <span class="tok-nv">@array2</span> = (<span class="tok-mi">2</span><span class="tok-o">..</span><span class="tok-mi">50001</span>);

<span class="tok-k">my</span> <span class="tok-nv">@result1</span> = <span class="tok-nv">@array1</span>.<span class="tok-n">map</span>( {<span class="tok-nb">is-prime</span>(<span class="tok-nv">$_</span> + <span class="tok-mi">1</span>)} );
<span class="tok-k">my</span> <span class="tok-nv">@result2</span> = <span class="tok-nv">@array2</span>.<span class="tok-n">map</span>( {<span class="tok-nb">is-prime</span>(<span class="tok-nv">$_</span> - <span class="tok-mi">1</span>)} );

<span class="tok-nb">say</span> <span class="tok-nv">@result1</span> <span class="tok-o">eqv</span> <span class="tok-nv">@result2</span>;

<span class="tok-nb">say</span> <span class="tok-nb">now</span> - <span class="tok-k">INIT</span> <span class="tok-nb">now</span>;</code></pre>
</div>
</div>
<div class="olist arabic">
<div class="title">Рассмотрим пример выше:</div>
<ol class="arabic">
<li>
<p>Мы определили два массива</p>
</li>
<li>
<p>применили разные операции к каждому массиву и сохранили результаты</p>
</li>
<li>
<p>проверили, являются ли оба результата одинаковыми</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Скрипт ждёт, пока выполнится <code>@array1.map( {is-prime($_ + 1)} )</code>,<br>
а потом выполняет <code>@array2.map( {is-prime($_ - 1)} )</code></p>
</div>
<div class="paragraph">
<p>Обе операции, применяемые к каждому массиву не зависят друг от друга.</p>
</div>
<div class="listingblock">
<div class="title">Почему бы не сделать их параллельными?</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">my</span> <span class="tok-nv">@array1</span> = (<span class="tok-mi">0</span><span class="tok-o">..</span><span class="tok-mi">49999</span>);
<span class="tok-k">my</span> <span class="tok-nv">@array2</span> = (<span class="tok-mi">2</span><span class="tok-o">..</span><span class="tok-mi">50001</span>);

<span class="tok-k">my</span> <span class="tok-nv">$promise1</span> = <span class="tok-nb">start</span> <span class="tok-nv">@array1</span>.<span class="tok-n">map</span>( {<span class="tok-nb">is-prime</span>(<span class="tok-nv">$_</span> + <span class="tok-mi">1</span>)} ).<span class="tok-nb">eager</span>;
<span class="tok-k">my</span> <span class="tok-nv">$promise2</span> = <span class="tok-nb">start</span> <span class="tok-nv">@array2</span>.<span class="tok-n">map</span>( {<span class="tok-nb">is-prime</span>(<span class="tok-nv">$_</span> - <span class="tok-mi">1</span>)} ).<span class="tok-nb">eager</span>;

<span class="tok-k">my</span> <span class="tok-nv">@result1</span> = <span class="tok-nb">await</span> <span class="tok-nv">$promise1</span>;
<span class="tok-k">my</span> <span class="tok-nv">@result2</span> = <span class="tok-nb">await</span> <span class="tok-nv">$promise2</span>;

<span class="tok-nb">say</span> <span class="tok-nv">@result1</span> <span class="tok-o">eqv</span> <span class="tok-nv">@result2</span>;

<span class="tok-nb">say</span> <span class="tok-nb">now</span> - <span class="tok-k">INIT</span> <span class="tok-nb">now</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p>Подпрограмма <code>start</code> выполняет код и возвращает <strong>объект типа Promise</strong> или кратко <strong>промис</strong> (обещание).<br>
Если код выполнится корректно, <em>промис</em> будет <strong>сдержан</strong>.<br>
Если код выбросит исключение, <em>промис</em> будет <strong>нарушен</strong>.</p>
</div>
<div class="paragraph">
<p>Подпрограмма <code>await</code> ждёт <strong>промис</strong>.<br>
Если оно <strong>сдержано</strong>, то результат будут возвращён.<br>
Если оно <strong>нарушено</strong>, будет брошено исключение.</p>
</div>
<div class="paragraph">
<p>Проверьте время, которое заняло выполнение каждого скрипта.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Параллелизм всегда добавляет дополнительную нагрузку ("оверхед") из-за многопоточности. Если эта нагрузка не покрывается приростом скорости вычисления, скрипт будет работать медленнее.<br>
Именно поэтому, использование <code>race</code>, <code>hyper</code>, <code>start</code> и <code>await</code> для очень простых скриптов на деле может сделать их медленнее.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_одновременность_и_асинхронность">14.2. Одновременность и Асинхронность</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Больше узнать об одновременности и асинхронности в программировании можно узнать на <a href="https://docs.raku.org/language/concurrency" class="bare">https://docs.raku.org/language/concurrency</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_интерфейс_для_нативных_вызовов">15. Интерфейс для нативных вызовов</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В Raku есть возможность использовать библиотеки языка Си, используя интерфейс для нативных вызовов.</p>
</div>
<div class="paragraph">
<p><code>NativeCall</code> это стандартный модуль, который поставляется с Raku и предоставляет набор функциональности для того,
чтобы упростить взаимодействие между Raku и Си.</p>
</div>
<div class="sect2">
<h3 id="_вызов_функции">15.1. Вызов функции</h3>
<div class="paragraph">
<p>Рассмотрим код на языке Си, который определяет функцию под названием <code>hellofromc</code>.
Эта функция выводит в терминал <code>Hello from C</code>. Она не принимает никаких аргументов и не возвращает никакого значения.</p>
</div>
<div class="listingblock">
<div class="title">ncitest.c</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span><span class="tok-w"> </span><span class="tok-cpf">&lt;stdio.h&gt;</span>

<span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">hellofromc</span><span class="tok-w"> </span><span class="tok-p">()</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">  </span><span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello from C</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В зависимости от вашей операционной системы, запустите следующие команды для того, чтобы скомпилировать код на Cи в библиотеку.</p>
</div>
<div class="listingblock">
<div class="title">Для Linux:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">gcc</span> -<span class="tok-n">c</span> -<span class="tok-n">fpic</span> <span class="tok-n">ncitest</span>.<span class="tok-n">c</span>
<span class="tok-n">gcc</span> -<span class="tok-n">shared</span> -<span class="tok-n">o</span> <span class="tok-n">libncitest</span>.<span class="tok-nb">so</span> <span class="tok-n">ncitest</span>.<span class="tok-n">o</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Для Windows:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">gcc</span> -<span class="tok-n">c</span> <span class="tok-n">ncitest</span>.<span class="tok-n">c</span>
<span class="tok-n">gcc</span> -<span class="tok-n">shared</span> -<span class="tok-n">o</span> <span class="tok-n">ncitest</span>.<span class="tok-n">dll</span> <span class="tok-n">ncitest</span>.<span class="tok-n">o</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Для macOS:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-n">gcc</span> -<span class="tok-n">dynamiclib</span> -<span class="tok-n">o</span> <span class="tok-n">libncitest</span>.<span class="tok-n">dylib</span> <span class="tok-n">ncitest</span>.<span class="tok-n">c</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В той же директории, где вы скомпилировали Си библиотеку, создайте новый скрипт на Raku,
который содержит код ниже, и запустите его.</p>
</div>
<div class="listingblock">
<div class="title">ncitest.p6</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">use</span> <span class="tok-n">NativeCall</span>;

<span class="tok-k">constant</span> <span class="tok-n">LIBPATH</span> = <span class="tok-s">&quot;$*CWD/ncitest&quot;</span>;
<span class="tok-k">sub</span> <span class="tok-n">hellofromc</span>() <span class="tok-k">is</span> <span class="tok-k">native</span>(<span class="tok-n">LIBPATH</span>) { * }

<span class="tok-n">hellofromc</span>();</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p>Сперва мы объявили, что будем использовать модуль <code>NativeCall</code>.<br>
После этого мы создали константу <code>LIBPATH</code>, которая содержит путь к Си библиотеке.<br>
Отметьте, что <code>$*CWD</code> возвращает текущую рабочую директорию.<br>
После этого мы создали подпрограмму под названием <code>hellofromc()</code>, которая служит
обёрткой для своей дополняющей функции на Си, с таким же именем и находящуюся в Си
библиотеке, которую можно найти в пути <code>LIBPATH</code>.<br>
Всё это сделано используя трейт <code>is native</code>.<br>
Наконец, мы вызываем нашу подпрограмму в Raku.</p>
</div>
<div class="paragraph">
<p>В сущности, всё сводится к объявлению подпрограммы с трейтом <code>is native</code> и именем Си библиотеки.</p>
</div>
</div>
<div class="sect2">
<h3 id="_переименование_функции">15.2. Переименование функции</h3>
<div class="paragraph">
<p>В подразделе выше, мы видели, как можно вызвать очень простую функцию на Си, обернув
её с помощью подпрограммы в Raku с таким же именем, используя трейт <code>is native</code>.</p>
</div>
<div class="paragraph">
<p>В некоторых случаях, может быть предпочтительно изменить имя подпрограммы Raku.<br>
Для этого, мы используем трейт <code>is symbol</code>.</p>
</div>
<div class="paragraph">
<p>Давайте изменим скрипт выше на Raku и назовём Raku подпрограмму <code>hello</code>
вместо <code>hellofromc</code></p>
</div>
<div class="listingblock">
<div class="title">ncitest.p6</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">use</span> <span class="tok-n">NativeCall</span>;

<span class="tok-k">constant</span> <span class="tok-n">LIBPATH</span> = <span class="tok-s">&quot;$*CWD/ncitest&quot;</span>;
<span class="tok-k">sub</span> <span class="tok-n">hello</span>() <span class="tok-k">is</span> <span class="tok-k">native</span>(<span class="tok-n">LIBPATH</span>) <span class="tok-k">is</span> <span class="tok-k">symbol</span>(<span class="tok-s">&#39;hellofromc&#39;</span>) { * }

<span class="tok-n">hello</span>();</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Пояснение</div>
<p>В случае, когда подпрограмма в Raku имеет имя отличное от своего Си дополнения, нам
следует использовать трейт <code>is symbol</code> с именем оригинальной функции на Си.</p>
</div>
</div>
<div class="sect2">
<h3 id="_передача_аргументов">15.3. Передача аргументов</h3>
<div class="paragraph">
<p>Скомпилируйте код модифицированной библиотеки Си и запустите скрипт на Raku, которые указаны ниже.<br>
Отметьте, что мы изменили и код на Си и код на Raku для того, чтобы принимать аргументом строку (<code>char*</code> в Cи и <code>Str</code> в Raku)</p>
</div>
<div class="listingblock">
<div class="title">ncitest.c</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span><span class="tok-w"> </span><span class="tok-cpf">&lt;stdio.h&gt;</span>

<span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">hellofromc</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-n">name</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">  </span><span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello, %s! This is C!</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ncitest.p6</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">use</span> <span class="tok-n">NativeCall</span>;

<span class="tok-k">constant</span> <span class="tok-n">LIBPATH</span> = <span class="tok-s">&quot;$*CWD/ncitest&quot;</span>;
<span class="tok-k">sub</span> <span class="tok-n">hello</span>(<span class="tok-nb">Str</span>) <span class="tok-k">is</span> <span class="tok-k">native</span>(<span class="tok-n">LIBPATH</span>) <span class="tok-k">is</span> <span class="tok-k">symbol</span>(<span class="tok-s">&#39;hellofromc&#39;</span>) { * }

<span class="tok-n">hello</span>(<span class="tok-s">&#39;Jane&#39;</span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_возврат_значений_2">15.4. Возврат значений</h3>
<div class="paragraph">
<p>Повторим процесс, создав простой калькулятор, который принимает
2 целых числа и складывает их.<br>
Скомпилируйте Си библиотеку и запустите Raku скрипт.</p>
</div>
<div class="listingblock">
<div class="title">ncitest.c</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span><span class="tok-w"> </span><span class="tok-nf">add</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-w"> </span><span class="tok-n">a</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-kt">int</span><span class="tok-w"> </span><span class="tok-n">b</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">  </span><span class="tok-k">return</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-n">a</span><span class="tok-w"> </span><span class="tok-o">+</span><span class="tok-w"> </span><span class="tok-n">b</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ncitest.p6</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="perl6"><span></span><span class="tok-k">use</span> <span class="tok-n">NativeCall</span>;

<span class="tok-k">constant</span> <span class="tok-n">LIBPATH</span> = <span class="tok-s">&quot;$*CWD/ncitest&quot;</span>;
<span class="tok-k">sub</span> <span class="tok-nb">add</span>(<span class="tok-nb">int32</span>,<span class="tok-nb">int32</span>) <span class="tok-k">returns</span> <span class="tok-nb">int32</span> <span class="tok-k">is</span> <span class="tok-k">native</span>(<span class="tok-n">LIBPATH</span>) { * }

<span class="tok-nb">say</span> <span class="tok-nb">add</span>(<span class="tok-mi">2</span>,<span class="tok-mi">3</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Отметьте, что и функция на Си и функция на Raku принимают два целых числа и возвращают одно
(<code>int</code> в Cи и <code>int32</code> в Raku)</p>
</div>
</div>
<div class="sect2">
<h3 id="_типы_2">15.5. Типы</h3>
<div class="paragraph">
<p>Возможно, вы задаётесь вопросом, почему мы использовали <code>int32</code> вместо <code>Int</code> в последнем скрипте на Raku.<br>
Часть типов в Raku, такие как <code>Int</code>, <code>Rat</code> и некоторые другие, не могут передаваться или быть возвращены значением из функции на Cи.<br></p>
</div>
<div class="paragraph">
<p>Необходимо использовать такие же типы в Raku, как в Cи.</p>
</div>
<div class="paragraph">
<p>К счастью, Raku предоставляет много типов для того, чтобы представлять соответствующий тип в Cи.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Тип в Cи</th>
<th class="tableblock halign-center valign-middle">Тип в Perl 6</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>char</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>int8</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>int8_t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>short</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>int16</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>int16_t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>int32</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>int32_t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>int64_t</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>int64</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>unsigned char</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>uint8</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>uint8_t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>unsigned short</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>uint16</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>uint16_t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>unsigned int</code></p></td>
<td class="tableblock halign-center valign-middle" rowspan="2"><p class="tableblock"><code>uint32</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>uint32_t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>uint64_t</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>uint64</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>long</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>long</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>long long</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>longlong</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>float</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>num32</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>double</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>num64</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>size_t</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>size_t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>char*</code> (String)</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>Str</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Массивы: к примеру, <code>int*</code> (массив целых чисел) и <code>double*</code> (массив чисел с удвоенной точностью)</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><code>CArray</code>: к примеру, <code>CArray[int32]</code> и <code>CArray[num64]</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Больше об интерфейсе для нативных вызовов можно узнать на <a href="https://docs.raku.org/language/nativecall" class="bare">https://docs.raku.org/language/nativecall</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_сообщество">16. Сообщество</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://web.libera.chat/#raku">#raku</a> IRC канал. Много вещей обсуждается на IRC. Скорее всего, это первое место, куда вам следует обращаться по любому вопросу: <a href="https://raku.org/community/irc" class="bare">https://raku.org/community/irc</a></p>
</li>
<li>
<p><a href="https://rakudoweekly.blog/">rakudoweekly</a> это еженедельный обзор изменений в Raku и связанных с ним областях.</p>
</li>
<li>
<p><a href="http://pl6anet.org">pl6anet</a> агрегатор блогов. Оставайтесь в курсе, читая блоги, которые сфокусированы на Raku.</p>
</li>
<li>
<p><a href="https://www.reddit.com/r/rakulang/">/r/rakulang/</a> подписывайтесь на подраздел Raku.</p>
</li>
<li>
<p><a href="https://twitter.com/perl6org">@perl6org</a> следите за нами в Twitter.</p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/tagged/raku">StackOverflow Raku questions</a> Место где на Ваш вопрос могут ответить более развернуто</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Notations for intervals: <a href="https://en.wikipedia.org/wiki/Interval_(mathematics)#Notations_for_intervals" class="bare">https://en.wikipedia.org/wiki/Interval_(mathematics)#Notations_for_intervals</a>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-08-23 00:05:01 +0300
</div>
</div>
</body>
</html>